<!DOCTYPE html>
<html id="top">
<!--
  RustBites_Conversions.html
-->
<head>
  <title>Rust Conversions</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
  <link rel="stylesheet" href="../css/reset.css" />
  <link rel="stylesheet" href="../css/ContentMenus.css" />
  <link rel="stylesheet" href="../css/Content.css" />
  <link rel="stylesheet" href="../css/help.css" />
  <link rel="stylesheet" href="../css/ThemeRust.css" />
  <link rel="stylesheet" href="../css/StylesPhoto.css" />
  <link rel="stylesheet" href="../css/StylesSizerComp.css" />
  <link rel="stylesheet" href="../css/StylesWebComponents.css" />
  <script src="../js/ScriptsWebComponents.js"></script>
  <script src="../js/Content.js"></script>
  <script src="../js/ContentMenus.js"></script>
  <link rel="stylesheet" href="../css/FigureSizer.css" />
  <script src="../js/FigureSizer.js"></script>
  <link rel="stylesheet" href="../css/link-nav.css" />
  <link rel="stylesheet" href="../css/content-links.css" />
  <script src="../js/cookies.js"></script>
  <script src="../js/contentElements.js"></script>
  <script src="../js/contentMessages.js"></script>
  <link rel="stylesheet" href="../css/prism.css" />
  <script src="../js/prism.js"></script>
  <link rel="stylesheet" href="../css/StylesSplitterBar.css" />
  <script src="../js/ScriptsSplitterBar.js"></script>
  <script>
    function loadInExplorer() {
      const loc = window.location;
      if(loc === window.top.location) {
        window.location = "ExploreRust.html?src=" + loc;
      }
    }
    function load() {
      loadInExplorer();
      buildBottomMenu();
      postFileName();
      setPersistantElements();
    }
  </script>
  <style>
    .menuHeader {
      padding:0.0rem 0.5rem 0.25rem 0.5rem;
    }
  </style>
  <style>
    /* body {
      font-family: sans-serif;
      line-height: 1.6;
      margin: 2em;
      background: #f9f9f9;
      color: #222;
    } */
    /* h1 {
      text-align: center;
      color: #333;
    } */
    dt {
      font-weight: bold;
      margin-top: 0.5em;
      color: var(--dark);
    }
    dd {
      margin-left: 1em;
      margin-bottom: 0.25em;
    }
    section {
      margin-bottom: 1.5em;
    }
    /* h3 {
      border-bottom: 1px solid #ccc;
      padding-bottom: 0.25em;
      color: #555;
    } */
    code {
      background: #eef;
      padding: 0 3px;
      border-radius: 3px;
    }
    section {
      font-size:0.9rem;
    }
    td {
      font-size: 0.9rem;
      vertical-align: top;
    }
  </style>
</head>
<body id="github" onload="load()">

  <!-- show-hide with 'about' message -->
  <div id="about" class="hidden" onclick="this.classList.toggle('hidden')">
    RustBites_Conversions.html<br />
    copyright &copy; James Fawcett<br />
    Revised: 07/10/2025
  </div>

  <content-block>
    <header>
      <!--<a class="repoLink" href="https://github.com/JimFawcett">JimFawcett Repositories</a>-->
      <div id="pagetitle" class="header">
        <h2 id="title">Rust Bites: Conversions</h2>
        <h4 id="subtitle" class="indent">
          most Rust conversions are explicit        
        </h4>
      </div>
      <div class="header" style="position:relative; padding:0.0em 0em 0.25em 0em; margin-top:0.125em; border:2px solid var(--dark);">
        <a class="repoLinks" target="_blank" href="https://github.com/JimFawcett" style="color:var(--light); margin-top:0.25em; margin-left:1.5em;">About</a>
        <a class="repoLinks" target="_self" href="RustHome.html" style="color:var(--light); margin-left:1.5em;">Rust Track</a>
      </div>
    </header>
        <a id="prologue"></a>
        <h3>1. Prologue</h2>
        <t-b>
          There are only two types of implicit conversions provided by Rust:
          <ol class="tight">
            <li>
              Conversion from mutable to immutable, e.g., can pass a mutable reference to a function
              expecting an immutable reference.
            </li>
            <li>
              Smart pointer dereferencing, e.g., <c-s>Box&lt;T&gt;</c-s>, <c-s>Rc&lt;T&gt;</c-s>,
              <c-s>Arc&lt;T&gt;</c-s>, and <c-s>RefCell&lt;T&gt;</c-s>
              implement the <c-s><a target="_blank" href="https://doc.rust-lang.org/std/ops/trait.Deref.html">Deref</a></c-s> trait.
              That means code can use the <c-s>T</c-s> interface through
              smart pointers without any explicit code boilerplate because the compiler automatically
              dereferences smart pointers where types wouldn&apos;t otherwise match.
            </li>
          </ol>
        </t-b>
        <t-b>
          Rust has defined two conversion traits <c-s><a target="_blank" href="https://doc.rust-lang.org/std/convert/trait.Into.html">Into</a></c-s> and
          <c-s><a target="_blank" href="https://doc.rust-lang.org/std/convert/trait.From.html">From</a></c-s> which many library types
          implement and user-defined types can do that as well.
          <div class="indent pad5">
            <c-s>let s = String::from("a string");</c-s>
          </div>
          Rather than use <c-s>Into</c-s> trait directly, it is usually simpler to use the format macro:
          <div class="indent pad5">
            <c-s>let v = vec![1, 2, 3];</c-s><br />
            <c-s>let vs = format!("{}",v);</c-s>
          </div>
          With format you can use any of the formatting facilities provided for console IO.
        </t-b>
        <div style="height: 0.5rem;"></div>
        <a id="primitives"></a>
        <h3>2. Primitives</h2>
        <t-b>
          Primitive types are defined as part of the Rust language, as in C++, C#, ...
          Here&apos;s a quick overview:
          <a target="_blank" href="RustBites_DataStr.html">RustBites&nbsp;DataStr</a>.
          There is a nice description for conversions of primitives in
          <a target="_blank" href="https://Cheats.rs#number-conversions">Cheats.rs</a>.
          It&apos;s all you need.
        </t-b>
        <div style="height: 0.5rem;"></div>
        <a id="strings"></a>
        <h3>3. Strings</h2>
        <t-b>
          Rust provides a <c-s>std::String</c-s> type that represents a collection of utf-8 characters.
          A utf-8 character may occupy from 1 to 4 bytes.  That means that Rust can represent languages
          that use diacritics, and script characters, e.g., Sanskrit, Hanzi, Arabic, ...
          It also means that <c-s>String</c-s>s cannot be indexed.  For that, Rust provides the <c-s>chars()</c-s>
          iterator.
        </t-b>
        <t-b>
          Each Rust <c-s>String</c-s> has a stack-based control block and a heap-based collection of characters,
          as shown in <a target="_blank" href="RustBites_Data.html#traits">RustBites&nbsp;Data</a>.
          Rust also provides the <c-s>str</c-s> type used to represent literal strings: <c-s>"a literal string"</c-s>.
          We usually encounter this type behind a reference, e.g.: <c-s>let s: &str = "a literal";</c-s>
        </t-b>
        <t-b>
          Rust intends to make interoperating with <c-s>C</c-s> language code straight-forward using its
          <c-s><a target="_blank" href="https://doc.rust-lang.org/std/ffi/index.html">std::ffi</a></c-s> (foreign-function interface)
          facility.  for that it introduces the types
          <c-s><a target="_blank" href="https://doc.rust-lang.org/std/ffi/struct.OsString.html">OsString</a></c-s> and
          <c-s><a target="_blank" href="https://doc.rust-lang.org/std/ffi/struct.OsStr.html">OsStr</a></c-s>,
          like <c-s>String</c-s> and <c-s>str</c-s>, respectively, but using the platform string encoding.
        </t-b>
        <t-b>
          It also provides <c-s><a target="_blank" href="https://doc.rust-lang.org/std/path/struct.PathBuf.html">PathBuf</a></c-s>
          and <c-s><a target="_blank" href="https://doc.rust-lang.org/std/path/struct.Path.html">Path</a></c-s> which wrap
          <c-s>OsString</c-s> and <c-s>OsStr</c-s> with added methods for handling directory paths.  The
          file system API, <c-s><a target="_blank" href="https://doc.rust-lang.org/std/fs/index.html">std::fs</a></c-s> uses
          both in many of its function and method calls.
        </t-b>
        <t-b>
          There is a nice description for conversions of strings in
          <a target="_blank" href="https://Cheats.rs#string-conversions">Cheats.rs</a>.
          It&apos;s almost all you need.
        </t-b>
        <t-b>
          Many types can be converted to strings using the <c-s>format!</c-s> macro.  That allows you to
          use the same formatting used for console IO, but get that as a <c-s>String</c-s>
        </t-b>
        <a id="other"></a>
        <h3>2. Other Types</h2>
        <t-b>
          There are too many combinations to address here.  As I work on interesting examples I&apos;ll add some
          here.
        </t-b>
        <a id="refs"></a>
        <h3>3. References:</h2>
        <div class="indent">
          <table>
            <tr>
              <th>Link</th>
              <th>Description</th>
            </tr>
            <tr>
              <td><a target="_blank" href="https://cheats.rs">Cheats.rs</a></td>
              <td>
                Very comprehensive collection of Rust facts in brief code snippets and comments.
              </td>
            </tr>
            <tr>
              <td><a target="_blank" href="https://cheats.rs/#number-conversions">Cheats number-conversions</a></td>
              <td>
                Conversions of primitive types.
              </td>
            </tr>
            <tr>
              <td><a target="_blank" href="https://cheats.rs/#string-conversions">Cheats string-conversions</a></td>
              <td>
                Conversions between String, &str, OsString, OsStr, PathBuf, and Path.
              </td>
            </tr>
            <tr>
              <td><a target="_blank" href="https://cheats.rs/#string-output">Cheats string-output</a></td>
              <td>
                Convert String contents for formatted output.
              </td>
            </tr>
          </table>
        </div>
  <div style="height:15em;"></div>
  </content-block>
  <div id="bottomMenu">
    <div id="keys" class="hidden"></div>
    <div id="sections" class="hidden">
      <div class="darkItem listheader" onclick="toggleSections()">Sections</div>
      <div class="menuBody">
        <a href="#top">top</a>
        <a href="#prologue">prologue</a>
        <a href="#primitives">primitives</a>
        <a href="#strings">strings`</a>
        <a href="#other">other</a>
        <a href="#refs">refs</a>
        <a href="#bottom">bottom</a>
      </div>
    </div>
    <div id="pages" class="hidden"></div>
    <div id="url" class="hidden">url</div>
    <div id="goto" class="hidden">url</div>
  </div>
  <a id="bottom"></a>
  <script src="js/RustBitesPages.js"></script>
  <script>buildPages()</script>
  <script>createSiteNavMenu('goto')</script>
  <script src="../js/link-nav.js" defer></script>
  <script>
    setCookie('#pages', 26, 10);
  </script>
</body>
</html>