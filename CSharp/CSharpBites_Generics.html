<!DOCTYPE html>
<html id="top">
<!--
  CSharpBites_Objects.html
-->
<head>
  <title>C# Generics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
  <link rel="stylesheet" href="../css/reset.css" />
  <link rel="stylesheet" href="../css/ContentMenus.css" />
  <link rel="stylesheet" href="../css/Content.css" />
  <link rel="stylesheet" href="../css/help.css" />
  <link rel="stylesheet" href="../css/ThemeCSharp.css" />
  <link rel="stylesheet" href="../css/StylesPhoto.css" />
  <link rel="stylesheet" href="../css/StylesSizerComp.css" />
  <link rel="stylesheet" href="../css/StylesWebComponents.css" />
  <script src="../js/ScriptsWebComponents.js"></script>
  <script src="../js/Content.js"></script>
  <script src="../js/ContentMenus.js"></script>
  <link rel="stylesheet" href="../css/FigureSizer.css" />
  <script src="../js/FigureSizer.js"></script>
  <link rel="stylesheet" href="../css/link-nav.css" />
  <link rel="stylesheet" href="../css/content-links.css" />
  <script src="../js/cookies.js"></script>
  <script src="../js/contentElements.js"></script>
  <script src="../js/contentMessages.js"></script>
  <link rel="stylesheet" href="../css/prism.css" />
  <script src="../js/prism.js"></script>
  <link rel="stylesheet" href="../css/StylesSplitterBar.css" />
  <script src="../js/ScriptsSplitterBar.js"></script>
  <link rel="stylesheet" href="css/Styles_BitsContent.css" />
  <script src="js/Scripts_BitsContent.js"></script>
  <script>
    function loadInExplorer() {
      const loc = window.location;
      if(loc === window.top.location) {
        window.location = "ExploreCSharp.html?src=" + loc;
      }
    }
    function load() {
      loadInExplorer();
      buildBottomMenu();
      postFileName();
      setPersistantElements();
    }
  </script>
  <style>
    .menuHeader {
      padding:0.0rem 0.5rem 0.25rem 0.5rem;
    }
    .wrapper {
      display:flex;
      flex-direction: row;
      /* border:2px solid var(--dark); */
    }
    .codewrapfloat {
      padding:0rem 0.25rem;
      border:2px solid var(--dark);
    }
    .textwrap {
      padding:0rem 1rem; 
      width:30rem; 
      border:2px solid var(--dark);
    }

    details {
      margin-top:1rem;
    }


  </style>
</head>
<body id="github" onload="load()">

  <!-- <a id="next" class="hidden" href="CSharpBites_Data.html"></a>
  <a id="prev" class="hidden" href="CSharpBites_HelloCSharp.html"></a> -->

  <!-- show-hide with 'about' message -->
  <div id="about" class="hidden" onclick="this.classList.toggle('hidden')">
    CSharpBites_Generics.html<br />
    copyright &copy; James Fawcett<br />
    Revised: 06/20/2025
  </div>

  <content-block>
    <header>
      <!--<a class="repoLink" href="https://github.com/JimFawcett">JimFawcett Repositories</a>-->
      <div id="pagetitle" class="header">
        <h2 id="title">C# Bites: Generics</h2>
        <h4 id="subtitle" class="indent">
          generic library and user-defined types
        </h4>
      </div>
      <div class="header" style="position:relative; padding:0.0em 0em 0.25em 0em; margin-top:0.125em; border:2px solid var(--dark);">
        <a class="repoLinks" target="_blank" href="https://github.com/JimFawcett" style="color:var(--atten); margin-top:0.25em; margin-left:1.5em;">About</a>
        <a class="repoLinks" target="_self" href="CSharpHome.html" style="color:var(--atten); margin-left:1.5rem;">C# Track</a>
      </div>

      <!--<div style="padding-right:25px; position:absolute; top:1.1em; right:13em; z-index:5;">-->
    </header>
        <t-b id="syn" style="border:1px solid maroon; padding:0.25em 1em 0.5em 1em;">
          <h4 style="margin:0em 0em 0.25em 0em;">Synopsis:</h4>
          This page demonstrates uses of C# generic functions and types.
          <hr class="spread" />
          <ul>
            <li>
              C# generics support definition of class and method patterns, which can
              be instantiated for a variety of different concrete types.
            </li>
            <li>
              Each instantiation must use types that provide all the facilities used
              in the pattern.
            </li>
            <li>
              The pattern can provide constraints on its type parameters that guarantee methods
              and properties required by the pattern.
            </li>
          </ul>
          <div style="height:0.5em;"></div>
        </t-b>
        <details id="notes">
          <summary class="darkItem">Demo Notes&nbsp;&nbsp;</summary>
          <t-b><hr /></t-b>
          <t-b>
            All of the languages covered in this demonstration support generics with the exception
            of JavaScript.
          </t-b>
          <t-b>
            Three of the languages: C++, Rust, and C# provide generics.  Python provides a typing module
            that provides type hints, checked with a static analysis tool.  Each generic function or class
            is a pattern for defining functions and classes of a specific type.  Thus a generic is a
            pattern for making patterns.
          </t-b>
          <t-b>
            Python and JavaScript, are dynamically typed and already support defining
            functions and classes for multiple types, e.g., no need for generics.
          </t-b>
          <t-b>
            This demonstration illustrates use of generic functions and classes, which for C++, Rust, and C#,
            are processed by the compiler.
          </t-b>
          <t-b><hr /></t-b>
        </details>
        <h3 id="generics">1.0 Generics and Constraints</h3>
        <t-b>
          Generics are patterns for functions and classes that use placeholder generic types, like <c-s>T</c-s>
          below. The patterns become
          specific functions and classes when the placeholders are replaced with specific defined types.
        </t-b>
        <t-b>
          <hr />
        </t-b>
        <t-b>
          <strong>Generic functions</strong> use the syntax:
          <div class="inset">
            <div style="float:right;margin-right:1em;">Examples in <a target="_blank" href="#funcsdef">Section 2.6.1</a></div>
            <c-s>
              public Tr F&lt;T&gt (T t, ...) where T: C1, C2, ... {<br />
              &nbsp;&nbsp;&nbsp;/* implementing code using T */<br />
              }
            </c-s>
          </div>
          <c-s>C1, C2</c-s>, ... are constraints that place requirements on the generic parameter T,
          as shown below.  <c-s>Tr</c-s> is a return type that may be a generic parameter.
        </t-b>
        <t-b>
          If the body of F invokes methods on T that are not required by
          specified traits then compilation may fail. We say that constraits are bounds on T because
          they narrow the range of valid generic parameters.
        </t-b>
        <t-b>
          <hr />
        </t-b>
        <t-b>
          <strong>C# Constraints</strong> are declarations that require a generic parameter to satisfy some
          set of conditions:
          <div class="inset">
            <c-s>
              <table class="tight">
                <tr>
                  <td>where T: BC</td>
                  <td>// derive from or equal to class BC</td>
                </tr>
                <tr>
                  <td>where T: IF</td>
                  <td>// implement interface IF</td>
                </tr>
                <tr>
                  <td>where T: class</td>
                  <td>// must be a reference type</td>
                </tr>
                <tr>
                  <td>where T: struct</td>
                  <td>// must be value type</td>
                </tr>
                <tr>
                  <td>where T: new()</td>
                  <td>// can be created with new()</td>
                </tr>
                <tr>
                  <td>...</td>
                  <td></td>
                </tr>
              </table>
            </c-s>
          </div>
          Common interfaces include:
          <c-s>IEnumerable&lt;T&gt;, IComparable&lt;T&gt;, IEquatable&lt;T&gt;, ICollection&lt;T&gt;</c-s>, ...
        </t-b>
        <t-b>
          <hr />
        </t-b>
        <t-b>
          <strong>Generic classes</strong> are defined with the syntax:
          <div class="inset">
            <c-s>
              public class SomeType&lt;T&gt;<br />
              &nbsp;&nbsp;&nbsp;&nbsp;where T: C1, C2, ...<br />
              {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;SomeType(T arg1, ...) {<br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* code to initialize instance */<br />
              &nbsp;&nbsp;&nbsp;&nbsp;}<br />
              &nbsp;&nbsp;&nbsp;&nbsp;/* code declaring additional SomeType methods and data */<br />
              }<br />
              <br />
            </c-s>
          </div>
        </t-b>
        <h3 id="code">2.0 Source Code</h3>
        <t-b>
          Examples below show how to use library and user defined types with emphasis on
          illustrating syntax and basic operations.
        </t-b>
        <t-b>
          These demonstrations of generic C# code are partitioned into modules Program.cs, Stats.cs, Points.cs,
          and Analysis.cs. Discussion of each of these will be
          presented in separate sections of the page, below, accessed from links in the left panel.
        </t-b>

        <div style="height:0.75em;"></div>
        <h3 id="stdlib">2.1 Standard Generic Library Types</h3>
        <t-b>
          Standard generic types are defined in the
          <a target="_blank" href="https://learn.microsoft.com/en-us/dotnet/standard/class-library-overview">.Net Standard Library</a>
          and include many more than shown here. We have selected three frequently used types for
          demonstration: arrays, lists, and dictionaries. You can find details of the others from the <a target="_blank" href="#refs">references</a>.
        </t-b>
        <t-b>
          The examples below show how to use library and user defined types with emphasis on
          illustrating syntax and basic operations.
        </t-b>
        <t-b>
          Alter splitter-bar panel widths by dragging splitter bar or clicking in either panel
          to expand that panel&apos;s width. Default widths are set by setting width style on
          left panel.
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="stdlib-first" style="width:52%;">
              <div class="codewrap" onclick="cbubbleup('stdlib-first')">
                <pre style="width:200em;"><code class="language-cpp">static void Demonstrate_Std_Library_Types() {

  Display.ShowNote(&quot;Demonstrate std library generic types&quot;, nl);

  Display.ShowOp(&quot;String[] array processed by generic function&quot;);
  String[] array = {&quot;one&quot;, &quot;two&quot;, &quot;three&quot;};
  Display.ShowTypeEnum(array, &quot;array&quot;, 5, nl);

  Display.ShowOp(&quot;List&lt;double&gt;&quot;);
  List&lt;double&gt; aList =
  new List&lt;double&gt;{ 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0 };
  Display.ShowTypeEnum(aList, &quot;aList&quot;, 5, nl);

  Display.ShowOp(&quot;Dictionary&lt;int, String&gt;&quot;);
  var d1 = new Dictionary&lt;int, String&gt;
  {
    { 0, &quot;zero&quot;}, {1, &quot;one&quot;}, {2, &quot;two&quot;}
  };
  Display.ShowTypeEnum(d1, &quot;d1&quot;, 5, nl);

}</code></pre>
              </div>
            </first-item>
            <splitter-bar id="stdlib-seperator"></splitter-bar>
            <second-item id="stdlib-second" style="width:40em;">
              <div class="codewrap" onclick="obubbleup('stdlib-first')">
                <pre style="width:200em;"><code class="language-shell">--------------------------------------------------
Demonstrate std library generic types
--------------------------------------------------

--- String[] array processed by generic function ---
array: String[], size: 8, reference type
value:
  array {
    one, two, three
  }

--- List<double> ---
aList: List<T>, size: 8, reference type
value:
  aList {
    1, 1.5, 2, 2.5, 3,
    3.5, 4
  }

--- Dictionary<int, String> ---
d1: Dictionary<K,V>, size: 8, reference type
value:
  d1 {
    [0, zero], [1, one], [2, two]
  }

</code></pre>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:1em;"></div>
        <div style="height:1em"></div>
        <h3 id="userdef">1.2 User-defined Custom Types</h3>
        <t-b>
          C# defines custom types with the &quot;<c-s>class</c-s>&quot; keyword. Classes are
          patterns for laying out instances in memory and define operations for the instance
          data.
        </t-b>
        <t-b>
          Generic classes use one or more generic parameters as placeholders for specific defined
          types. That supports providing a single design that works for multiple types, improving
          code abstraction and developer productivity.
        </t-b>
        <t-b>
          <c-s>Hello&lt;T&gt;</c-s> is a simple demonstration of how to create and use C# generic
          classes.
        </t-b>
        <h3 id="hellodef">1.2.1 Hello&lt;T&gt; Definition</h3>
        <t-b>

        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="hellodef-first" style="width:52%;">
              <div class="codewrap" onclick="cbubbleup('hellodef-first')">
                <pre style="width:200em;"><code class="language-cpp">public class Hello&lt;T&gt; where T:new() {
  public Hello() {
    datum = new T();
  }
  public Hello(T t) {
    datum = t;
  }
  public void show(String nm) {
    Console.Write(&quot;  {0}: {{ {1} }}&#92;n&quot;, nm, datum);
  }
  public T datum { get; set; }  // property
}


</code></pre>
              </div>
            </first-item>
            <splitter-bar id="hellodef-seperator"></splitter-bar>
            <second-item id="hellodef-second" style="width:40em; background-color:var(--light);" onclick="obubbleup('hellodef-first')">
              <div class="textwrap noflow">
                <h3><c-s>Hello&lt;T&gt;:</c-s></h3>
                <c-s>class Hello&lt;T&gt;</c-s> declares a generic parameter T that<br />
                is a placeholder of specific concrete types, e.g., <c-s>int</c-s> or<br />
                <c-s>float</c-s>. One definition provides an open-ended number<br />
                of concrete classes, one for each concrete type declared in<br />
                program code.
                <div style="height:0.50em;"></div>
                The generic parameter is required to provide a constructor<br />
                with the constraint <c-s>where T : new()</c-s>.
                <div style="height:0.50em;"></div>
                This class defines a property, <c-s>datum</c-s> that exposes a value<br />
                with get and set operations and two overloaded constructors,<br />
                one that initializes the property value to a default value<br />
                and one that initializes the property to a specified value.
                <div style="height:0.50em;"></div>
                It also defines a function <c-s>show(string nm)</c-s> that displays<br />
                a representation of the instance on the terminal.
                <div style="height:0.50em;"></div>
                This is a simple example designed to illustrate syntax for<br />
                C# classes. More details follow in following code blocks.
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:0.75em;"></div>
        <h3 id="hellodemo">1.2.2 Hello&lt;T&gt; Demonstration</h3>
        <t-b>

        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="hellodemo-first" style="width:52%;">
              <div class="codewrap" onclick="cbubbleup('hellodemo-first')">
                <pre style="width:200em;"><code class="language-cpp">Display.ShowOp(&quot;Hello&lt;int&gt;&quot;);
Hello&lt;int&gt; hi = new Hello&lt;int&gt;(42);
Display.ShowType(hi, &quot;hi&quot;);
Console.WriteLine(&quot;value:&quot;);
hi.show(&quot;h&quot;);
Display.ShowOp(&quot;Hello&lt;double&gt;&quot;);
Hello&lt;double&gt; hd = new Hello&lt;double&gt;(3.1415927);
Console.WriteLine(&quot;access hd.datum: {0}&quot;, hd.datum);
hd.show(&quot;hd&quot;);
Console.WriteLine();
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="hellodemo-seperator"></splitter-bar>
            <second-item id="hellodemo-second" style="width:40em;">
              <div class="codewrap" onclick="obubbleup('hellodemo-first')">
                <pre style="width:200em;"><code class="language-shell">--- Hello&lt;int&gt; ---
hi: Hello&lt;T&gt;, size: 8, reference type
value:
  h: { 42 }
--- Hello&lt;double&gt; ---
access hd.datum: 3.1415927
  hd: { 3.1415927 }

</code></pre>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:1em;"></div>
        <h3 id="statsdef">1.2.3 Stats&lt;T&gt; Definition</h3>
        <t-b>
          Stats.cs is a single file that defines the <c-s>Stats&lt;T&gt;</c-s> type. All of the code
          for this file is shown in the left panel below. It illustrates in a simple way how useful
          computational functionality can be provided for consumption by application programs.
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="statsdef-first" style="width:60%;">
              <div class="codewrap" onclick="cbubbleup('statsdef-first')">
                <pre style="width:200em;"><code class="language-cpp">/*-------------------------------------------------------------------
  Stats.cs
  - provides definitions for user-defined class Stats&lt;T&gt;
*/

using System.Collections;
using System.Collections.Generic;   // IEnumerable&lt;T&gt;, List&lt;T&gt;, ...
using System.Numerics;              // INumber&lt;T&gt;
using Analysis;

namespace Stats {
  /*----------------------------------------------------------------------
    Stats&lt;T&gt; is a generic demo type
     - holds any finite number of generic values
     - computes several statistics on its values
  */
  public class Stats&lt;T&gt;
    where T: INumber&lt;T&gt;
  {
    /*--------------------------------------------------------------------
      Constructs a point with N coordinates each with default value
    */
    public List&lt;T&gt; items { get; set; }
    public Stats(List&lt;T&gt; l) {
      items = l;
    }
    public void check() {
      if (items == null) {
        throw new SystemException(&quot;stats is null&quot;);
      }
      else if (items.Count &lt; 1)
        throw new SystemException(&quot;stats is empty&quot;);
    }
    public int size() {
      check();
      return items.Count;
    }
    public T max() {
      check();
      T max = items[0];
      foreach(T item in items) {
        if(max.CompareTo(item) &lt; 0)
          max = item;
      }
      return max;
    }
    public T min() {
      check();
      T min = items[0];
      foreach(T item in items) {
        if(min.CompareTo(item) &gt; 0)
          min = item;
      }
      return min;
    }
    public T? sum() {
      check();
      dynamic? sum = default(T);
      if(sum != null) {
        foreach(T item in items) {
          sum += item;
        }
        return sum;
      }
      return default(T);
    }
    public double avg() {
      check();
      dynamic? sum = this.sum();
      return Convert.ToDouble(sum)/Convert.ToDouble(items.Count);
    }
  }
}
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="statsdef-seperator"></splitter-bar>
            <second-item id="statsdef-second" style="width:40em; background-color:var(--light);" onclick="obubbleup('statsdef-first')">
              <div class="textwrap noflow">
                <h3>Stats&lt;T&gt;:</h3>
                This demonstration shows how a user-defined<br />
                class can implement arithmetic operations on<br />
                its data members.
                <div style="height:0.50em;"></div>
                In order for that to work the generic parameter<br />
                <c-s>T</c-s> has to be constrained to those that support<br />
                arithmetic operations.  That&apos;s achieved with the<br />
                bound <c-s>where T : INumber&lt;T&gt;</c-s>.
                <div style="height:0.50em;"></div>
                <c-s>Stats&lt;T&gt;</c-s> defines its data items as a property<br />
                holding a <c-s>List&lt;T&gt;</c-s>. That encapsulates the data<br />
                inside getter and setter methods that can, if<br />
                needed, control access to and modifications of<br />
                the data.  How to do that is shown <a target="_blank" href="https://www.w3schools.com/cs/cs_properties.php">here</a>.
                <div style="height:5em;"></div>
                <span style="font-size:1.25em; font-weight:bold;">&lArr;</span> <c-s>INumber&lt;T&gt;</c-s> constraint
                <div style="height:6em;"></div>
                <span style="font-size:1.25em; font-weight:bold;">&lArr;</span> <c-s>items</c-s> property<br />
                To make the property immutable, simply remove<br /><c-s>set;</c-s>.
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:0.75em;"></div>
        <h3 id="statsdemo">1.2.4 Stats&lt;T&gt; Demonstration</h3>
        <t-b>
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="statsdemo-first" style="width:52%;">
              <div class="codewrap" onclick="cbubbleup('statsdemo-first')">
                <pre style="width:200em;"><code class="language-cpp">Display.ShowOp(&quot;Stats&lt;int&gt;&quot;);
List&lt;int&gt; tmp1 = new List&lt;int&gt; { 1, 2, 3, 2, 1 };
Stats&lt;int&gt; si = new Stats&lt;int&gt;(tmp1);
ShowList(tmp1);
Console.WriteLine(&quot;  max: {0}&quot;, si.max());
Console.WriteLine(&quot;  min: {0}&quot;, si.min());
Console.WriteLine(&quot;  sum: {0}&quot;, si.sum());
Console.WriteLine(&quot;  avg: {0:0.00}&quot;, si.avg());
Console.WriteLine();

Display.ShowOp(&quot;Stats&lt;double&gt;&quot;);
List&lt;double&gt; tmp2 = new List&lt;double&gt; { 1.0, 1.5, 2.0, 1.5, 1.0 };
Stats&lt;double&gt; sd = new Stats&lt;double&gt;(tmp2);
ShowList(tmp2);
Console.WriteLine(&quot;  max: {0:0.0}&quot;, sd.max());
Console.WriteLine(&quot;  min: {0:0.0}&quot;, sd.min());
Console.WriteLine(&quot;  sum: {0:0.0}&quot;, sd.sum());
Console.WriteLine(&quot;  avg: {0:0.00}&quot;, sd.avg());
Console.WriteLine();
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="statsdemo-seperator"></splitter-bar>
            <second-item id="statsde,p-second" style="width:40em;">
              <div class="codewrap" onclick="obubbleup('statsdemo-first')">
                <pre style="width:200em;"><code class="language-shell">--- Stats&lt;int&gt; ---
  [ 1, 2, 3, 2, 1 ]
  max: 3
  min: 1
  sum: 9
  avg: 1.80

--- Stats&lt;double&gt; ---
  [ 1, 1.5, 2, 1.5, 1 ]
  max: 2.0
  min: 1.0
  sum: 7.0
  avg: 1.40

</code></pre>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:1em;"></div>

        <h3 id="pointdef">1.2.5 Point&lt;T&gt; Definition</h3>
        <t-b>
          <c-s>Point&lt;T&gt;</c-s> is similar to the generic types <c-s>Point&lt;T, N&gt;</c-s> defined
          for C++ and Rust. There is one fundamental difference; the C++ template and Rust generic point
          types each take an integer parameter <c-s>N</c-s>. The C# generic point class does not.
        </t-b>
        <t-b>
          C# does not support adding integer types to a generic parameter list, e.g., <c-s>&lt;T, N&gt;</c-s>
          is not allowed.
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="pointdef-first" style="width:60%;">
              <div class="codewrap" onclick="cbubbleup('pointdef-first')">
                <pre style="width:200em;"><code class="language-cpp">/*-------------------------------------------------------------------
  Points.cs
  - provides definitions for user-defined class Point&lt;T&gt;
*/

using System.Collections;
using System.Collections.Generic;   // IEnumerable&lt;T&gt;, List&lt;T&gt;
using Analysis;

namespace Points {
  /*----------------------------------------------------------------------
    Point&lt;T&gt; represents a point in N-dimensional space
     - C# generics do not accept integers as generic parameters
       so we cannot declare P&lt;T,N&gt; where N is an integer like
       we did for C++ and Rust
     - Point holds any finite number of generic coordinates
     - coordinates are held in a List&lt;T&gt;
     - implements IEnumerable&lt;T&gt; so it can be indexed and iterated
     - it is a reference type because it is implemented with a class.
       its List&lt;T&gt; is also a reference type
  */
  public class Point&lt;T&gt; : IEnumerable&lt;T&gt;, Analysis.IShow
  {
    /*--------------------------------------------------------------------
      Constructs an empty point
    */
    public Point() {
      coor = new List&lt;T&gt;();
    }
    /*--------------------------------------------------------------------
      Constructs a point with N coordinates each with default value
    */
    public Point(int N) {
      coor = new List&lt;T&gt;();
      for(int i = 0; i&lt;N; ++i) {
        T? test = default(T);
        if(test != null) {
          coor.Add(test);
        }
      }
    }
    /* translates IShow::show() for needs of Point class */
    public void Show(string name, int _width = 5, int _left = 2) {
      int SaveWidth = Width;
      int SaveLeft = Left;
      Width = _width;
      Left = _left;
      PrintSelf(name);
      Width = SaveWidth;
      Left = SaveLeft;
    }
    /*
      Displays structure and state of N-dimensional point.
      - state is a set of rows of coordinate data
      - property Width specifies number of elements in each row
      - property Left specifies offset of row from terminal Left edge
    */
    public void PrintSelf(string name) {
      Console.Write(Display.Indent(Left));
      Console.Write(&quot;{0} {{&#92;n{1}&quot;, name, Display.Indent(Left + 2));
      for(int i=0; i&lt;coor.Count; ++i) {
        Console.Write(&quot;{0}&quot;, coor[i]);
        if(i &lt; coor.Count - 1) {
          Display.print(&quot;, &quot;);
        }
        if((i+1) % Width == 0 && i != coor.Count - 1) {
          Console.Write(&quot;&#92;n&quot;);
          Console.Write(Display.Indent(Left + Indent));
        }
      }
      Console.Write(&quot;&#92;n{0}&quot;, Display.Indent(Left));
      Console.WriteLine(&quot;}&quot;);
      String callname = &quot;  &quot; + dt;
      Console.WriteLine(callname);
    }
    /* The three functions below support indexing and iterating */
    public T this[int index] {
      get { return coor[index]; }
      set { coor.Insert(index, value); }
    }
    public IEnumerator&lt;T&gt; GetEnumerator() {
      return coor.GetEnumerator();
    }
    IEnumerator IEnumerable.GetEnumerator() {
      return this.GetEnumerator();
    }
    /* supports inializer list */
    public void Add(T t) {
      coor.Add(t);
    }
    public void AddRange(IEnumerable&lt;T&gt; list) {
      coor.AddRange(list);
    }
    public List&lt;T&gt; coor { get; set; }
    public DateTime dt { get; set; } = DateTime.Now;
    public int Length { get { return coor.Count; } }
    public int Width { get; set; } = 5;   // default row size
    public int Left { get; set; } = 2;    // default offset
    public int Indent { get; set; } = 2;
    /* initializers */
    public Point&lt;T&gt; width(int w) {
      this.Width = w;
      return this;
    }
    public Point&lt;T&gt; left(int l) {
      this.Left = l;
      return this;
    }
    public Point&lt;T&gt; indent(int i) {
      this.Indent = i;
      return this;
    }
  }
}</code></pre>
              </div>
            </first-item>
            <splitter-bar id="pointdef-seperator"></splitter-bar>
            <second-item id="pointdef-second" style="width:40em; background-color:var(--light);" onclick="obubbleup('pointdef-first')">
              <div class="textwrap noflow">
                <h3>Point&lt;T&gt;</h3>
                A reference type parameterized on <c-s>T</c-s>, the type of<br />
                its coordinate members.
                <div style="height:5em;"></div>
                <span style="font-size:1.75em; font-weight:bold;">&lArr;</span>
                <strong>Import</strong> Analysis and Display classes.
                <div style="height:20em;"></div>
                <span style="font-size:1.75em; font-weight:bold;">&lArr;</span>
                <c-s>Point&lt;T&gt;</c-s> implements<br />
                <c-s>IEnumerable&lt;T&gt;</c-s> and <c-s>IShow</c-s> interfaces.<br />
                Compilation will fail if the class does<br />
                not implement all of the methods declared<br />
                with these interfaces.

                <div style="height:7em;"></div>
                <t-b>
                  <span style="font-size:1.75em; font-weight:bold;">&lArr;</span> <strong>Constructor:</strong> <c-s>Point(int n)</c-s><br />
                  Unlike C++ and Rust, C# cannot use integral<br />
                  types as generic parameters, so the number of<br />
                  coordinates is passed as a constructor argument.<br />
                  <div style="height:77em;"></div>
                  <span style="font-size:1.75em; font-weight:bold;">&lArr;</span> <strong>Initialized Constructor:</strong><br />
                  <c-s>Point&lt;int&gt; { 1, 2, 3, 4, 5 }</c-s><br />
                  implicitly uses <c-s>Add(T t)</c-s> to add elements<br />
                  to <c-s>coor</c-s>.
                </t-b>
                <div style="height:7em"></div>
                <span style="font-size:1.75em; font-weight:bold;">&lArr;</span> <strong>Display format:</strong><br />
                <c-s>Width</c-s> sets number of elements per row<br />
                <c-s>Left</c-s> sets left margin<br />
                <c-s>Indent</c-s> sets offset of data within delimiters<br />

              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:0.75em;"></div>

        <h3 id="pointdemo">1.2.6 Point&lt;T&gt; Demonstration</h3>
        <t-b class="indents">
          The panel view below is wrapped with a flex container and the right panel is set to fill
          space not occupied by left panel. Both left and right panels have white-space:pre style.
        </t-b>
        <t-b>
          Text color in the left panel uses syntax highlighting generated by the prism styling from
          prism.com. This is intended for code display.
        </t-b>
        <t-b>
          The right panel is also pre styling with terminal colors, intended for output display.
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="pointdemo-first" style="width:52%;">
              <div class="codewrap" onclick="cbubbleup('pointdemo-first')">
                <pre style="width:200em;"><code class="language-csharp">Display.ShowOp(&quot;Point&lt;double&gt;&quot;);

Point&lt;double&gt; p = new Point&lt;double&gt;(5);
List&lt;double&gt; tmp = new List&lt;double&gt;{ 1.0, 2.5, 3.0, -2.5, 1.0 };
p.coor = tmp;
Display.ShowTypeEnum(p, &quot;p&quot;);
Display.ShowOp(&quot;use indexing to retrieve and modify coordinates&quot;);
Console.WriteLine(&quot;  value of p[1] is {0}&quot;, p[1]);
p[1] = -2.5;
Display.ShowOp(&quot;using p.show(callName)&quot;);
p.Show(&quot;p&quot;);
Console.WriteLine();

/* uses default constructor with initializer list */
Display.ShowOp(&quot;new Point&lt;int&gt; { 1, 2, 3, 4, 5}&quot;);
Point&lt;int&gt; pi = new Point&lt;int&gt; { 1, 2, 3, 4, 5 };
pi.Show(&quot;pi&quot;);
List&lt;int&gt; rng = new List&lt;int&gt; {4,3,2,1};
Display.ShowOp(&quot;pi.AddRange(rng)&quot;);
pi.AddRange(rng);
int[] arr = { 0, -1, -2 };
pi.AddRange(arr);
pi.width(6);
pi.Show(&quot;pi&quot;);
Console.WriteLine();
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="pointdemo-seperator"></splitter-bar>
            <second-item id="pointdemo-second" style="width:40em;">
              <div class="codewrap" onclick="obubbleup('pointdemo-first')">
                <pre style="width:200em;"><code class="language-term">--- Point&lt;double&gt; ---
p: Point&lt;T&gt;, size: 8, reference type
value:
  p {
    1, 2.5, 3, -2.5, 1
  }
--- use indexing to retrieve and modify coordinates ---
  value of p[1] is 2.5
--- using p.show(callName) ---
  p {
    1, -2.5, 2.5, 3, -2.5,
    1
  }
  6/27/2024 2:27:15 PM

--- new Point&lt;int&gt; { 1, 2, 3, 4, 5} ---
  pi {
    1, 2, 3, 4, 5
  }
  6/27/2024 2:27:15 PM
--- pi.AddRange(rng) ---
  pi {
    1, 2, 3, 4, 5,
    4, 3, 2, 1, 0,
    -1, -2
  }
  6/27/2024 2:27:15 PM

</code></pre>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:1em;"></div>
        <h3 id="genfunc">1.2.7 Generic Functions Definition</h3>
        <t-b>
          The Analysis library provides 14 methods, of which 9 are generic. They illustrate
          the power of generics to provide reusable, configurable code.
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="analysis-first" style="width:60%;">
              <div class="codewrap" onclick="cbubbleup('analysis-first')">
                <pre style="width:200em;"><code class="language-cpp">/*-------------------------------------------------------------------
  Analysis.cs
  - provides several type analysis and display methods in the
    class Display
*/
using System;
using System.Collections;
using System.Collections.Generic;     // IEnumerable&lt;T&gt;, List&lt;T&gt;
using System.Linq;                    // IEnumerable&lt;T&gt;.ToArray
using System.Text;                    // StringBuilder
using System.Reflection;
using System.Reflection.Emit;         // managed size
using System.Runtime.InteropServices; // GCHandle

namespace Analysis {
  /*----------------------------------------------------------
    IShow interface allows analysis functions to operate on
    instances of any class that implements it.
    - See ShowTypeShowable&lt;T&gt;(T t, ...), below.
  */
  public interface IShow {
    void Show(string name, int Width = 5, int Left = 2);   // show instance state as rows of elements
    int Length { get; }       // total number of elements
    int Width { get; set; }   // number of elements per row
    int Left { get; set; }    // offset from terminal Left
    int Indent {get; set; }   // element indent from braces
  }
  /*-----------------------------------------------------------------------
    Collection of static functions that present information about types
    and data values on the terminal line.
  */
  public class Display {
    public static String Spaces(int i) {
      return new String(' ', i);
    }
    public static bool IsAssociativeColl(IEnumerable coll) {
      return coll is IDictionary;
    }
    /*-------------------------------------------------
      Show static type with some formatting adjustments
      and name at callsite.
    */
    public static void ShowType&lt;T&gt;(T t, string nm) {
      Type tt = t!.GetType();
      string tnm = tt.Name;
      if(tt.IsGenericType) {
        if(tnm.Length &gt; 1) {
          tnm = tnm.Remove(tnm.Length - 2) + &quot;&lt;T&gt;&quot;;
        }
      }
      Console.Write(&quot;{0}: {1}, &quot;, nm, tnm);
      int size = GetManagedSize(tt);
      Console.Write(&quot;size: {0}, &quot;, size);
      if (tt.IsValueType) {
        Console.WriteLine(&quot;value type&quot;);
      }
      else {
        Console.WriteLine(&quot;reference type&quot;);
      }
    }
    /*-------------------------------------------------
      Display information about the type of any scalar type.
      - scalar types are those with a single value like:
          int, double, string, ...
      - This function directly uses only simple reflection
    */
    public static void ShowTypeScalar&lt;T&gt;(
      T t, string nm, string suffix = &quot;&quot;
    )
    {
      ShowType(t, nm);
      Console.WriteLine(&quot;value: &#92;&quot;{0}&#92;&quot;{1}&quot;, t, suffix);
    }
    /*-------------------------------------------------
      Show type information for any type that implements
      IEnumerable&lt;T&gt; interface.
    */
    public static void ShowTypeEnum&lt;T&gt; (
    IEnumerable&lt;T&gt; t, string nm, int w = 5, string suffix = &quot;&quot;
    )
    {
      Type tt = t!.GetType();
      string tnm = tt.Name;
      if(tt.IsGenericType) {
        if(tnm.Length &gt; 1) {
          tnm = tnm.Remove(tnm.Length - 2);
          if(IsAssociativeColl(t)) {
            tnm += &quot;&lt;K,V&gt;&quot;;
          }
          else {
            tnm += &quot;&lt;T&gt;&quot;;
          }
        }
      }
      Console.Write(&quot;{0}: {1}, &quot;, nm, tnm);
      int size = GetManagedSize(tt);
      Console.Write(&quot;size: {0}, &quot;, size);
      if (tt.IsValueType) {
        Console.WriteLine(&quot;value type&quot;);
      }
      else {
        Console.WriteLine(&quot;reference type&quot;);
      }
      Console.WriteLine(&quot;value:&#92;n{0}{1} {{&quot;, &quot;  &quot;, nm);
      /*
        beautify value list into rows of w elements
        indented by 4 spaces
      */
      string tmp = FoldArray(t.ToArray(), w, 4);
      Console.Write(tmp);
      Console.WriteLine(&quot;&#92;n  }&quot;);
      Console.Write(suffix);
    }
    /*-------------------------------------------------
      Show type information for any type that implements
      the IShow interface
    */
    public static void ShowTypeShowable&lt;T&gt;(
      T t, string nm, string suffix=&quot;&quot;
    )
    where T:IShow
    {
      ShowType(t, nm);
      Console.WriteLine(&quot;value:&quot;);
      t.Show(nm);     // guaranteed by IShow implementation
      Console.Write(suffix);
    }
    /*-------------------------------------------------
      Provides name of caller, nm, as label for IShow() information.
      - works for all Showable instances
    */
    public static void ShowLabeledObject&lt;T&gt;(
      T t, string nm
    ) where T:IShow {
      // Console.Write(nm);
      t.Show(nm);
    }
    /*-------------------------------------------------
      Provides name of caller, nm, as label for value.
      - works for all T with ToString.
    */
    public static void DisplayLabeledObject&lt;T&gt;(T t, string nm) {
      Console.WriteLine(&quot;{0}: {1}&quot;, nm, t!.ToString());
    }
    /*-------------------------------------------------
      create string of count spaces, used to offset output
    */
    public static string Indent(int count) {
      StringBuilder sb = new StringBuilder();
      sb.Append(' ', count);
      return sb.ToString();
    }
    /*-------------------------------------------------
      Truncate string to length of N, but only if
      its length is greater than N
    */
    public static string truncate(int N, string bigStr) {
      if(bigStr.Length &lt;= N) {
        return bigStr;
      }
      StringBuilder sb =  new StringBuilder();
      sb.Append(bigStr);
      sb.Length = N;  // move back pointer to desired length
      return sb.ToString();
    }
    /*-------------------------------------------------
      fold array elements into rows of w elements
    */
    public static string FoldArray&lt;T&gt;(T[] arr, int w, int Left) {
      StringBuilder tmp = new StringBuilder();
      tmp.Append(Indent(Left));
      for(int i=0; i&lt; arr.Length; ++i) {
        tmp.Append(arr[i]!.ToString());
        tmp.Append(&quot;, &quot;);
        if((i+1) % w == 0 && i != arr.Length - 1) {
          tmp.Append(&quot;&#92;n&quot;);
          tmp.Append(Indent(Left));
        }
      }
      if(tmp.Length &gt; 1) {
        tmp.Length -= 2;  // don't return last comma and space
      }
      return tmp.ToString();
    }
    /*-------------------------------------------------
      do t1 and t2 share the same address?
    */
    public static void IsSameObj&lt;T&gt;(
      T t1, String n1, T t2, String n2, string suffix = &quot;&quot;
    ) {
      if(ReferenceEquals(t1, t2)) {
        Console.WriteLine(
          &quot;{0} is same object as {1}{2}&quot;, n1, n2, suffix
        );
    }
      else {
        Console.WriteLine(
        &quot;{0} is not same object as {1}{2}&quot;, n1, n2, suffix);
      }
    }
    /*-------------------------------------------------
      Beware, two distinct objects may have same hashcode.
      - Not used in this demo for that reason.
    */
    public static void showIdent&lt;T&gt;(
      T t, String n, string suffix = &quot;&quot;
    ) {
      int id = t!.GetHashCode();
      Console.WriteLine(&quot;{0}, {1}{2}&quot;, n, id, suffix);
    }
    /*-------------------------------------------------
      Display function call or operation to help turn
      output data into information
    */
    public static void ShowOp(string op, string suffix = &quot;&quot;) {
      Console.WriteLine(&quot;--- {0} ---{1}&quot;, op, suffix);
    }
    public static void print(String s = &quot;&quot;) {
      Console.Write(s);
    }
    public static void println(String s = &quot;&quot;) {
      Console.WriteLine(s);
    }
    public static void Println(String s) {
      Console.WriteLine(s);
    }
    /*-------------------------------------------------
      Emphasize text with borders
    */
    public static void ShowNote(string s, int n=60, string suffix = &quot;&quot;) {
      string line = new string('-', n);
      Console.WriteLine(
        &quot;--------------------------------------------------&quot;
      );
      Console.WriteLine(&quot;{0}&quot;, s);
      Console.WriteLine(
        &quot;--------------------------------------------------{0}&quot;,
        suffix
      );
    }
    /*-------------------------------------------------
      Surround note with empty lines
    */
    public static void ShowLabel(string s) {
      Console.WriteLine();
      ShowNote(s);
      Console.WriteLine();
    }
  }
}
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="analysis-seperator"></splitter-bar>
            <second-item id="analysis-second" style="width:40em; background-color:var(--light);" onclick="obubbleup('analysis-first')">
              <div class="textwrap noflow">
                <h3>Generic Methods:</h3>
                <t-b>
                  C# does not support free functions. Instead,<br />
                  methods are defined in a class.
                </t-b>
                <t-b>
                  However, static methods of classes play the<br />
                  same role as free functions in other languages.
                </t-b>
                <div style="height:20em;"></div>
                <span style="font-size:1.75em; font-weight:bold;">&lArr;</span> <c-s>interface IShow:</c-s><br />
                <t-b>
                  Allows function:
                  <div class="inset">
                    <c-s>ShowTypeShowable&lt;T&gt;(T t, ...)</c-s>
                  </div>
                  to accept any type <c-s>T</c-s> that implements <c-s>IShow</c-s>.
                </t-b>
                <t-b>
                  Generic functions provide abstraction over<br />
                  types that improves developer productivity,<br />
                  code readability and maintainability.
                </t-b>
                <div style="height:72em;"></div>
                <span style="font-size:1.75em; font-weight:bold;">&lArr;</span>
                <c-s>ShowTypeEnum&lt;T&gt;(IEnumerable&lt;T&gt; t, ...)</c-s><br />
                <t-b>
                  Can display any <c-s>IEnumerable&lt;T&gt;</c-s> type, e.g.<br />
                  <c-s>Array&lt;T&gt;, List&lt;T&gt;, Point&lt;T&gt;</c-s>.
                </t-b>
                <div style="height:56em;"></div>
                <span style="font-size:1.75em; font-weight:bold;">&lArr;</span> <c-s>ShowTypeShowable(T t, ...)</c-s><br />
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:0.75em;"></div>
        <h3 id="complex">1.2.8 Complex Generic Methods</h3>
        <t-b>
          The dropdown below provides code for interesting generic methods, some of which use advanced
          techniques. They are useful know, but none are used in this demonstration.
        </t-b>
        <details>
          <summary class="darkItem">Complex Methods</summary>
          <div class="blockSingle" style="padding:0em;">
            <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
            <splitter-container id="container">
              <first-item id="complex-first" style="width:60%;">
                <div class="codewrap" onclick="cbubbleup('complex-first')">
                  <pre style="width:200em;"><code class="language-cpp">/*-----------------------------------------------------------
  All methods below this are not part of this presentation
  - may use advanced code techniques
  - may be experimental
  - may simply be alternate designs that could be
    useful in other applications
-----------------------------------------------------------*/
/*
  Show fields and methods for either reference or value types
  using reflection
*/
// https://stackoverflow.com/questions/7613782/iterating-through-struct-members
public static void iterate&lt;T&gt;(T t) /*where T:new()*/ {
  Console.WriteLine(&quot;fields:&quot;);
  foreach(
    var field in typeof(T).GetFields(
      BindingFlags.Instance |
      BindingFlags.NonPublic |
      BindingFlags.Public
    )
  ) {
    Console.WriteLine(
      &quot;  {0} = {1}&quot;, field.Name, field.GetValue(t)
    );
  }
  Console.WriteLine(&quot;methods:&quot;);
  foreach(
    var method in typeof(T).GetMethods(
      BindingFlags.Instance | BindingFlags.Public
    )
  ) {
    Console.WriteLine(
      &quot;  {0}&quot;, method.Name
    );
  }
}
/*-----------------------------------------------------
Build string representation of array of type T
-----------------------------------------------------*/
public static string ToStringRepArray&lt;T&gt;(T[] arr) {
  StringBuilder sb = new StringBuilder();
  sb.Append(&quot;{ &quot;);
  bool first = true;
  foreach(T item in arr) {
    if(item == null) {
      break;
    }
    if(first) {
      sb.Append(item.ToString());
      first = false;
    }
    else {
      sb.AppendFormat(&quot;, {0}&quot;, item);
    }
  }
  sb.Append(&quot; }&#92;n&quot;);
  return sb.ToString();
}
/*-----------------------------------------------------
Build string representation of IEnumerable
collection T&lt;U&gt;. Works for array too.
-----------------------------------------------------*/
public static string ToStringRepIEnumerable&lt;T,U&gt;(T enu)
  where T:IEnumerable&lt;U&gt;
{
  StringBuilder sb = new StringBuilder();
  sb.Append(&quot;[ &quot;);
  bool first = true;
  foreach(U item in enu) {
    if(item == null) {
      break;
    }
    if(first) {
      sb.Append(item.ToString());
      first = false;
    }
    else {
      sb.AppendFormat(&quot;, {0}&quot;, item);
    }
  }
  sb.Append(&quot; ]&#92;n&quot;);
  return sb.ToString();
}
/*-----------------------------------------------------
Direct implementation of enumerating associative
collection.  This can also be done with
ToStringRepIEnumerable&lt;Dict,KVPair&gt;(dict).
-----------------------------------------------------*/
public static string ToStringRepAssocCont&lt;Dict,Key,Value&gt;(Dict assoc)
  where Dict:IDictionary&lt;Key,Value&gt;
{
  StringBuilder sb = new StringBuilder();
  sb.Append(&quot;{ &quot;);
  bool first = true;
  foreach(var item in assoc) {
    if(first) {
      var sf = String.Format(&quot;{{{0}, {1}}}&quot;, item.Key, item.Value);
      sb.Append(sf);
      first = false;
    }
    else {
      sb.AppendFormat(&quot;, {{{0}, {1}}}&quot;, item.Key, item.Value);
    }
  }
  sb.Append(&quot; }&#92;n&quot;);
  return sb.ToString();
}
/*-- move this to functions --*/
static void DemoPassValAndRef() {
  Display.ShowNote(&quot;Pass by value&quot;, 60, &quot;&#92;n&quot;);
  double d = 3.1415927;
  Pass_by_value&lt;double&gt;(d, &quot;d&quot;);
  TestForNullValue(d, &quot;d&quot;);

  List&lt;int&gt; li = new List&lt;int&gt;{ 1, 2, 3, 2, 1 };
  Pass_by_value&lt;List&lt;int&gt;&gt;(li, &quot;li&quot;);
  TestForNullValue(li, &quot;li&quot;);
}
public static string GetTypeString&lt;T&gt;(T t, String nm, String suffix = &quot;&quot;)
{
  /*-- t! asserts that t is not null --*/
  Type tt = t!.GetType();
  string typeInfo = String.Format(&quot;{0}: Type: {1}&#92;n&quot;, nm, tt.Name);
  int size = GetManagedSize(tt);
  string instanceInfo = String.Format(&quot;value: {0}&#92;nsize: {1}{2}&quot;, t, size, suffix);
  return typeInfo + instanceInfo;
}
static unsafe void Pass_by_value&lt;T&gt;(T? t, string nm) {
  string ts = GetTypeString(t, nm);
  Console.WriteLine(ts);
  /*
    Suppresses warning about taking address of managed type.
    The pointer is used only to show the address of ptr
    as part of analysis of copy operations.
  */
  #pragma warning disable 8500
  string addrd = ToStringAddress&lt;T&gt;(&t);
  #pragma warning restore 8500
  Console.WriteLine(&quot;{0}: {1}&quot;, nm, addrd);
  t = default(T);
  /*
    caller sees this change if and only if T is a reference type
    in which case t is null.
  */
}
#pragma warning disable 8500
public static unsafe string ToStringAddress&lt;T&gt;(T* ptr) {
  if(ptr == null) {
    return &quot;&quot;;
  }
  IntPtr addr = (IntPtr)ptr;
  string addrstr = string.Format(&quot;address: 0x&quot; + addr.ToString(&quot;x&quot;));
  return addrstr;
}
#pragma warning restore 8500
/*-- extract address of reference instance in managed heap --*/
public static string ToStringAddressFromHandle&lt;T&gt;(T t) {
  string addrstr = &quot;for handle&#92;n&quot;;
  try {
    GCHandle handle = GCHandle.Alloc(t, GCHandleType.Pinned);
    IntPtr address = handle.AddrOfPinnedObject();
    addrstr = &quot;address: &quot; + String.Format(&quot;0x&quot; + address.ToString(&quot;x&quot;));
    handle.Free();
    return addrstr + &quot;&#92;n&quot;;
  }
  catch {
    Console.WriteLine(&quot;GCHandle exception thrown&quot;);
  }
  return addrstr;
}
static void TestForNullValue&lt;T&gt;(T? t, string nm) {
  if(t == null) {
    Console.WriteLine(nm + &quot; is null&quot;);
  }
  else {
    Console.WriteLine(nm + &quot; is {0}&quot;, t);
  }
}
static void DemoPrimitives() {
  Display.ShowNote(
    &quot;Examples of creation and display of Primitive Types&quot;,
    60
  );
  short s = 123;
  Display.ShowTypeScalar(s, &quot;s&quot;, &quot;&#92;n&quot;);
  long l = 12345;
  Display.ShowTypeScalar(l, &quot;l&quot;, &quot;&#92;n&quot;);
  float f = 3.1415927f;
  Display.ShowTypeScalar(f, &quot;f&quot;, &quot;&#92;n&quot;);
  double d = 3.1415927;
  Display.ShowTypeScalar(d, &quot;d&quot;, &quot;&#92;n&quot;);
  int[] arr = new int[]{ 4, 3, 2, 1, 0, -1};
  Display.ShowTypeScalar(arr, &quot;arr&quot;);
}
/*-------------------------------------------------
  Build string of comma separated values from
  Enumerable collection
  - no longer used here, but will be useful so kept
*/
// https://stackoverflow.com/questions/330493/join-collection-of-objects-into-comma-separated-string
public static string ToCSV&lt;T&gt;(IEnumerable&lt;T&gt; coll) {
  StringBuilder sb = new StringBuilder();
  foreach(T elem in coll) {
    sb.Append(elem!.ToString()).Append(&quot;, &quot;);
  }
  return sb.ToString(0, sb.Length - 2);
}
/*-------------------------------------------------
  Returns value of T for IEnumerable&lt;T&gt; at runtime.
  Needed for some functions that operate on generic
  collections.
  - at this time, not used in this demo
*/
// https://www.codeproject.com/Tips/5267157/How-To-Get-A-Collection-Element-Type-Using-Reflect
public static Type? GetTypeOfCollection(Object coll) {
  Type type = (coll).GetType();
  var etype = typeof(IEnumerable&lt;&gt;);
  foreach (var bt in type.GetInterfaces()) {
    if (bt.IsGenericType && bt.GetGenericTypeDefinition() == etype) {
      return (bt.GetGenericArguments()[0]);
    }
  }
  return null;
}
/*----------------------------------------------------------------
  This method uses advanced relection

  - GetMangedSize(Type type) is function that returns the size of
  value types and handles, used to help discover how things work.
  It is placed here because it uses advanced techniques that
  will eventually be covered elsewhere in this site.  Knowing
  how it works is not essential for the things we are examining
  in this demo.
*/
// https://stackoverflow.com/questions/8173239/c-getting-size-of-a-value-type-variable-at-runtime/8173293#8173293
public static int GetManagedSize(Type type)
{
  // all this just to invoke one opcode with no arguments!
  var method = new DynamicMethod(
    &quot;GetManagedSizeImpl&quot;, typeof(uint), new Type[0],
    typeof(TypeExtensions), false
  );

  ILGenerator gen = method.GetILGenerator();
  gen.Emit(OpCodes.Sizeof, type);
  gen.Emit(OpCodes.Ret);

  var func = (Func&lt;uint&gt;)method.CreateDelegate(typeof(Func&lt;uint&gt;));
  return checked((int)func());
}
</code></pre>
                </div>
              </first-item>
              <splitter-bar id="complex-seperator"></splitter-bar>
              <second-item id="complex-second" style="width:40em; background-color:var(--light);" onclick="obubbleup('complex-first')">
                <div class="textwrap noflow">
                  <t-b class="indents">
                    These functions provide additional functionality<br />
                    that will be useful in other programs, but are<br />
                    not used in this demonstration.
                  </t-b>
                  <t-b>
                    Some of them use advanced reflection tech-<br />
                    niques or other designs that are interesting.
                  </t-b>
                </div>
              </second-item>
            </splitter-container>
          </div>
        </details>
        <div style="height:0.75em;"></div>

        <h3 id="structure">1.3 Program Structure</h3>
        <t-b class="indents">
          The code below, Program.cs, imports libraries: Points, Analysis, and Stats.
          Using those facilities it orchestrates all the demonstrations shown here
          by calling in <c-s>Main</c-s> three methods developed above <c-s>Main</c-s>.
        </t-b>
        <t-b>
          Details
          of those methods have been elided to show the structure of this program.
          All of the elided code has already been shown in the code blocks above.
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="structure-first" style="width:60%;">
              <div class="codewrap" onclick="cbubbleup('structure-first')">
                <pre style="width:200em;"><code class="language-cpp">/*-------------------------------------------------------------------
  Cs_Generic::Program.cs
  - demonstrates creating and using std library generic types:
      array, List&lt;T&gt;, Dictionary&lt;K,V&gt;
  - demonstrates creating and using user-defined generic types:
      Demo&lt;T&gt;, Stats&lt;T&gt;, and Point&lt;T, N&gt;
  - depends on PointsGeneric.cs to provide user-defined Point class
  - depends on Stats.cs to provide user-defined Stats class
  - depends on AnalysisGeneric.cs for several display and analysis
    functions
*/
using System;
using System.Collections;
using System.Collections.Generic;   // IEnumerable&lt;T&gt;, List&lt;T&gt;
using System.Linq;                  // IEnumerable&lt;T&gt;.ToArray
using System.Text;                  // StringBuilder
using Points;                       // defined in Points.cs
using Analysis;                     // defined in Analysis.cs
using Stats;                        // defined in Stats.cs
/*-----------------------------------------------
Note:
Find all Bits code, including this in
https://github.com/JimFawcett/Bits
You can clone the repo from this link.
-----------------------------------------------*/
namespace CSharpGenerics
{
  /* definition of Hello&lt;T&gt; code elided */

  /*-- Generic demonstration begins here --*/

  class Program
  {
    const string nl = &quot;&#92;n&quot;;

    static void ShowList&lt;T&gt;(List&lt;T&gt; lst) {
      /* code elided */
    }

    static void Demonstrate_Std_Library_Types() {
      /* code elided */
    }
    static void Demonstrate_User_defined_Types() {
      /* code elided */
    }
    static void Demostrate_generic_functions() {
      /* code elided */
    }
    static void Main(string[] args)
    {
      Display.ShowLabel(&quot; Demonstrate C# generics&quot;);

      Demonstrate_Std_Library_Types();
      Demonstrate_User_defined_Types();
      Demostrate_generic_functions();

      Console.WriteLine(&quot;&#92;nThat's all Folks!&#92;n&quot;);
    }
  }
}
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="structure-seperator"></splitter-bar>
            <second-item id="structure-second" style="width:40em; background-color:var(--light);" onclick="obubbleup('structure-first')">
              <div class="textwrap noflow">
                <h3>Program</h3>
                <t-b class="indents">
                  This code block shows how Program.cs imple-<br />
                  ments all of the demonstrations in this<br />
                  Generic C# Bit. 
                </t-b>
                <t-b>
                  Code details, shown elsewhere, have been<br />
                  elided to show clearly the structure of<br />
                  this demonstration.
                </t-b>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:0.75em;"></div>


        <div style="height:0.25em;"></div>
        <h3 id="build">3.0 Build</h3>
        <div style="border:2px solid var(--dark); padding: 0em 0.25em; width:max-content; max-width:100%;">
          <pre style="width:max-content;"><code class="language-term">
C:&#92;github&#92;JimFawcett&#92;Bits&#92;CSharp&#92;Cs_Generic
&gt; dotnet build
MSBuild version 17.5.1+f6fdcf537 for .NET
  Determining projects to restore...
  All projects are up-to-date for restore.
  Cs_Objects -&gt; C:&#92;github&#92;JimFawcett&#92;Bits&#92;CSharp&#92;Cs_Generic&#92;bin&#92;Debug&#92;net7.0&#92;Cs_Ob  
  jects.dll

Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:01.79
C:&#92;github&#92;JimFawcett&#92;Bits&#92;CSharp&#92;Cs_Generic
          </code></pre>
        </div>
        <h3 id="ide">4.0 VS Code View</h3>
        <t-b>
          The code for this demo is available in
          <a target="_blank" href="https://github.com/JimFawcett/Bits">github.com/JimFawcett/Bits</a>. If you click on
          the Code dropdown you can clone the repository of all code for these demos to your local drive.
          Then, it is easy to bring up any example, in any of the languages, in VS Code.
        </t-b>
        <t-b>
          Here, we do that for CSharp\Cs_Generic.
        </t-b>
        <photosizer-block src="pictures/CSharp_Generic_Debug.JPG" width="800" class="photoSizerBlock left"
                          style="overflow-x:auto;">
          <span style="font-family:'Comic Sans MS';">Figure 1. VS Code IDE - C# Generics</span>
        </photosizer-block>
        <!--<photosizer-block src="pictures/LaunchJSON_CSharp_Objects.JPG" width="800" class="photoSizerBlock left"
    style="overflow-x:auto;"
  >
    <span style="font-family:'Comic Sans MS';">Figure 2. C# Launch.JSON</span>
  </photosizer-block>
  <photosizer-block src="pictures/VS_Code_Debugging_CSharp_Objects.JPG" width="800" class="photoSizerBlock left"
    style="overflow-x:auto;"
  >
    <span style="font-family:'Comic Sans MS';">Figure 3. Debugging C# Objects</span>
  </photosizer-block>-->
        <!--<photosizer-block src="pictures/VS_Code_Cpp_Plugins.jpg" width="700" class="photoSizerBlock left">
    <span style="font-family:'Comic Sans MS';">Figure 3. C++ Plugins</span>
  </photosizer-block>-->

        <div style="height:0.75em;" class="clear"></div>
        <h3 id="refs">4.0 References</h3>
        <table class="indent">
          <tr>
            <th class="darkItem">Reference</th>
            <th class="darkItem">Description</th>
          </tr>
          <tr>
            <td>
              <a target="_blank" href="https://www.tutorialspoint.com/csharp/csharp_generics.htm">C# Generics - tutorialspoint</a>
            </td>
            <td>
              Basic syntax with examples
            </td>
          </tr>
          <tr>
            <td>
              <a target="_blank" href="https://www.w3schools.com/cs/index.php">C# Tutorial - w3schools</a>
            </td>
            <td>
              Interactive examples
            </td>
          </tr>
          <tr>
            <td>
              <a target="_blank" href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/">C# Reference - Microsoft</a>
            </td>
            <td>
              Relatively complete informal language reference
            </td>
          </tr>
        </table>
        <div style="height:10em;"></div>
</content-block>
  <div id="bottomMenu">
    <div id="keys" class="hidden"></div>
    <div id="sections" class="hidden">
      <div class="darkItem listheader" onclick="toggleSections()">Sections</div>
      <div class="menuBody">
        <a href="#top">top</a>
        <a href="#syn">synopsis</a>
        <a href="#notes">notes</a>
        <a href="#generics">generics</a>
        <a href="#code">src code</a>
        <a href="#stdlib">stdlib types</a>
        <a href="#userdef">user-defined types</a>
        <a href="#hellodef">hello def</a>
        <a href="#hellodemo">hello demo</a>
        <a href="#statsdef">stats def</a>
        <a href="#statsdemo">stats demo</a>
        <a href="#pointdef">point def</a>
        <a href="#pointdemo">point demo</a>
        <a href="#genfunc">generic functions</a>
        <a href="#complex">complex functions</a>
        <a href="#structure">structure</a>
        <a href="#build">build</a>
        <a href="#ide">VS Code view</a>
        <a href="#refs">references</a>
        <a href="#bottom">bottom</a>
      </div>
    </div>
    <div id="pages" class="hidden"></div>
  </div>
  <a id="bottom"></a>
  <script src="js/CSharpBitesPages.js"></script>
  <script>buildPages()</script>
  <script src="../js/link-nav.js" defer></script>
  <script>
    setCookie('#pages', 5, 10);
  </script>
  <script>
    onLoadSplitter("stdlib");
    onLoadSplitter("hellodef");
    onLoadSplitter("hellodemo");
    onLoadSplitter("statsdef");
    onLoadSplitter("statsdemo");
    onLoadSplitter("pointdef");
    onLoadSplitter("pointdemo");
    onLoadSplitter("analysis");
    onLoadSplitter("complex");
    onLoadSplitter("structure");
    onLoadSplitter("anal");
  </script>
</body>
</html>