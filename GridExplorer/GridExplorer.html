<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Grid Layout with Adjustable Panels</title>
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="../images/favicon.ico" />
  <link rel="stylesheet" href="../css/reset.css" />
  <link rel="stylesheet" href="css/Explorer.css" />
  <!-- <link rel="stylesheet" href="css/CodeExplorer.css" /> -->
  <!-- <link rel="stylesheet" href="css/CodeExplorer.css" /> -->
  <link rel="stylesheet" href="../css/explorer-links.css" />
  <link rel="stylesheet" href="../css/CodeTheme.css" />
  <link rel="stylesheet" href="css/gridExplorer.css">
  <script src="../js/CodeContent.js"></script>
  <script src="../js/Content.js"></script>
  <script src="../js/ContentMenus.js"></script>
  <!-- <script src="../js/Explorer.js"></script> -->
  <script src="../js/BlogsAndHelp.js"></script>
  <script src="../js/panel.js"></script>
  <script src="js/ExploreCodeMsg.js"></script>
  <!-- <script src="../js/exploreMessages.js"></script> -->
  <script src="../js/link-nav.js" defer></script>
  <!-- <link rel="stylesheet" href="css/gridExplorer.css" /> -->
  <script src="js/gridExplorer.js"></script>
  <script>
    function toggleControls() {
      toggleElement('controls');
      toggleElement('grid-controls');
      toggleElement('setgetwidth');
    }
    function doCode() {
      window.location.href='../GridExplorer/GridExplorer.html';
      // window.location.href='../Code/ExploreCode.html';
    }
    function loadInDataManager() {
      const loc = window.location;
      const top = window.top.location;
      if(loc === top) {
        window.location = "../PageHost.html?src=" + loc;
      }
      window.parent.postMessage(makeMsg('loading'), '*');
    }
    function load() {
      loadInDataManager();
      processQueryString();
      buildBlogs();
      buildHelp();
      buildRes();
      // setPersistantElements();
      // panel.setPanel();
      hideInfoMsgs();
      // highLightSelect('both');
      loadIndex();
      // loadtwo();
      // handleIframeTransition();
      postHostMsg(makeMsg('url', location.href));
    }
    window.addEventListener('pageshow', (event) => {
      initBlogs();
      initHelp();
      initRes();
    });
  </script>
  <script>
    function showTopMenuInfo() {
      let info = document.getElementById('top-menu-info');
      if(isDefined(info)) {
        toggleElement('top-menu-info');
      }
    }
    function showBottomMenuInfo() {
      let info = document.getElementById('bottom-menu-info');
      if(isDefined(info)) {
        toggleElement('bottom-menu-info');
      }
    }
  </script>
  <script>
    function getUrl() {
      let url = getCookie('url');
      if(url === null || url === false) {
        url = "../Site/Explore.html";
        alert(url);
      }
      return url;
    }
    /* RustBites_Intro.html vs CppBites_Intro.html */
    function goRBCB() {
      const leftframe = document.getElementById('lpgframe');
      leftframe.src="../Rust/RustBites_Intro.html";
      // leftframe.src="../Rust/ExploreRust.html?src=RustBites_Intro.html";
      const rightframe = document.getElementById('rpgframe');
      rightframe.src="../Cpp/CppBites_Intro.html";
      // rightframe.src="../Cpp/ExploreCpp.html?src=CppBites_Intro.html";
      const index = document.getElementById('index');
      index.style.display = "none";
    }
    /* Rust Track vs C++ Track */
    function goRTCPPT() {
      const leftframe = document.getElementById('lpgframe');
      leftframe.src="../Rust/RustHome.html";
      const rightframe = document.getElementById('rpgframe');
      rightframe.src="../Cpp/CppHome.html";
      const index = document.getElementById('index');
      index.style.display = "none";
    }
    /* C# Track vs Python Track */
    function goCSTPT() {
      const leftframe = document.getElementById('lpgframe');
      leftframe.src="../CSharp/CSharpHome.html";
      const rightframe = document.getElementById('rpgframe');
      rightframe.src="../Python/PythonHome.html";
      const index = document.getElementById('index');
      index.style.display = "none";
    }
    /* Basic Track vs Basic Track */
    function goBTBT() {
      const leftframe = document.getElementById('lpgframe');
      leftframe.src="../Basics/BasicsHome.html";
      const rightframe = document.getElementById('rpgframe');
      rightframe.src="../Basics/BasicsHome.html";
      const index = document.getElementById('index');
      index.style.display = "none";
    }
    /* SiteDesign vs SiteDemo */
    function goSDSD() {
      const leftframe = document.getElementById('lpgframe');
      leftframe.src="../Site/SiteDesign.html";
      const rightframe = document.getElementById('rpgframe');
      rightframe.src="../Site/SiteDemo.html";
      const index = document.getElementById('index');
      index.style.display = "none";
    }
    /* Rust Story vs C++ Story */
    function goRSCS() {
      const leftframe = document.getElementById('lpgframe');
      leftframe.src="../Rust/RustStory_Prologue.html";
      const rightframe = document.getElementById('rpgframe');
      rightframe.src="../Cpp/CppStory_Prologue.html";
      const index = document.getElementById('index');
      index.style.display = "none";
    }
    /* RustBasics Code vs RustBasics Text */
    function goRBCRBT() {
      // alert('goRBCRBT()');
      const leftframe = document.getElementById('lpgframe');
      leftframe.src="../Rust/RustBasics_Code.html";
      const rightframe = document.getElementById('rpgframe');
      rightframe.src="../Rust/RustBasics_Text.html";
      const index = document.getElementById('index');
      index.style.display = "none";
      // const lpanel = document.getElementById("lpgframe");
      // const container = document.getElementById("panel-container");
      // const newWidth = container.clientWidth * 0.60;
      // lpanel.style.width = `${newWidth}px`;
    }
    /* Exit */
    function goSite() {
      window.location = "../Site/Explore.html";
      index.style.display = "none";
    }
    function goCode() {
      console.info("--- in goCode ---");
      const leftframe = document.getElementById('lpgframe');
      leftframe.src = "https://example1.com";
      // lfile = encodeURIComponent(lfile);
      const rightframe = document.getElementById('rpgframe');
      rightframe.src = "https://example1.com";
      // rfile = encodeURIComponent(rfile);
      // setCookie('lfile', lfile, 10);
      // setCookie('rfile', rfile, 10);
      // window.location = "GridExplorer.html";
      index.style.display = "none";
    }
    function loadIndex() {
      // alert('in loadIndex');
      let index = document.getElementById('index');
      index.style.display = "block";
    }
    function hideIndex() {
      index.style.display = "none";
    }
  </script>
  <style>
    #index {
      display:block;
      position:relative;
      top:var(--topmenuh);
      left:0rem;
      bottom: calc(var(--bottommenuh) + 1rem);
      right:0rem;
      padding:2rem 3rem;
      background-color: #fefefa;
      color: black;
      z-index: 10000;
    }
    .index-table {
      table-layout: fixed;
      border-collapse: collapse;
      border:none;
      margin:0.75rem 1rem;
    }
    .index-table th {
      padding:0.25rem 1rem;
      border:1px solid black;
      background:#666;
      color:#fefefa;
    }
    .index-table td {
      padding:0.25rem 1rem;
      border:1px solid black;
    }
    .index-select {
      cursor: pointer;
      text-decoration: underline;
    }
    .index-table td.index-select:hover {
      background-color: #ccc;
      color:rgb(52, 17, 17);
    }
    #index-container {
      display:flex;
      flex-direction: row;
      flex-wrap: wrap;
      margin-top: 0.75rem;
    }
    details {
      margin-right:-2rem;
    }
  </style>
</head>
<body id="github" onload="load()">

  <div id="topMenu">
    <div><strong>&nbsp;View Explorer</strong></div>
    <button id="info" class="topMenuButton" onclick="showTopMenuInfo()">?</button>
    <button class="topMenuButton" onclick="window.location.href='../Site/Explore.html?src=SiteHome.html'">Site</button>
    <button class="topMenuButton" onclick="window.location.href='../Rust/ExploreRust.html?src=RustHome.html'">Rust</button>
    <button class="topMenuButton" onclick="window.location.href='../Cpp/ExploreCpp.html?src=CppHome.html'">C++</button>
    <button class="topMenuButton" onclick="window.location.href='../CSharp/ExploreCSharp.html?src=CSharpHome.html'">C#</button>
    <button class="topMenuButton" onclick="window.location.href='../Python/ExplorePython.html?src=PythonHome.html'">Python</button>
    <button class="topMenuButton" onclick="window.location.href='../WebDev/ExploreWebDev.html?src=WebDevHome.html'">WebDev</button>
    <button class="topMenuButton" onclick="window.location.href='../SWDev/ExploreSWDev.html?src=SWDevHome.html'">SWDev</button>
    <button class="topMenuButton" onclick="window.location.href='../Basics/ExploreBasics.html?src=BasicsHome.html'">Basics</button>
    <button class="topMenuButton" onclick="window.location.href='../Code/ExploreCode.html?src=CodeHome.html'">Code</button>
    <button class="topMenuButton" onclick="doCode()">Viewer</button>
    <!-- <a class="topMenuButton underline" onclick="loadPanels('../Cpp/CppHome.html')">C++</a>
    <a class="topMenuButton underline" onclick="loadPanels('../CSharp/CSharpHome.html')">C#</a>
    <a class="topMenuButton underline" onclick="loadPanels('../Python/PythonHome.html')">Python</a>
    <a class="topMenuButton underline" onclick="loadPanels('../WebDev/WebDevHome.html')">WebDev</a>
    <a class="topMenuButton underline" onclick="loadPanels('../SWDev/SWDevHome.html')">SWDev</a>
    <a class="topMenuButton underline" onclick="loadPanels('../Basics/BasicsHome.html')">Basics</a> -->
    <!-- <a class="topMenuButton underline" href='GridExplorer.html'>Viewer</a> -->
    <!-- <button class="topMenuButton underline" onclick="window.location.href='../GridExplorer/GridExplorer.html?src=BasicsHome.html'">Viewer</button> -->
    <button id="mblogs" class="topMenuButton" onclick="toggleBlogs()">Blogs &#9662;</button>
    <button id="mhelp" class="topMenuButton" onclick="toggleHelp()">Help &#9662;</button>
    <button id="mres" class="topMenuButton" onclick="toggleRes()">Resrcs &#9662;</button>
  </div>
  
  <div id="blogs" class="hidden"></div>
  <div id="help" class="hidden"></div>
  <div id="res" class="hidden"></div>

  <div id="top-menu-info" class="hidden" onmouseleave="hideInfoMsgs()" onclick="hideElement('top-menu-info')">
    Top menu buttons, Rust ... Basics, each load a Track Summary page for the selected button topic.<br>
    Site and Code buttons load the Site Explorer and Code Viewer, respectively.
    <hr style="margin:0.25rem 0rem;">
    The Site button takes the display out of the two-code-pane Code Explorer, and the Code button takes<br>
    the display back into two-code-pane Code Explorer.
    <hr style="margin:0.25rem 0rem;">
    For example, Basics button loads BasicsHome.html, the Basics Track Summary page,<br>.
    into the panel or panels selected in the left panel &quot;Select Code&quot;.
  </div>

  <div id="bottom-menu-info" class="hidden" onmouseleave="hideInfoMsgs()" onclick="hideElement('bottom-menu-info')">
    Bottom menu buttons, except for &quot;Controls&quot; each send messages<br>
    requesting the hosted page to take some action.
    <hr style="margin:0.25rem 0rem;">
    For example, &quot;Sections&quot; button requests page to show list of Page Sections.
    <hr style="margin:0.25rem 0rem;">
    &quot;Controls&quot; button toggles visibility of control block at bottom<br>
    left of Explorer view.
  </div>

  <div id="index" style="display:none;">
    <div style="border:2px solid red; max-width: 50rem; padding:0.5rem 1.25rem;">
      <strong>Note1:</strong><br>
      This Viewer is fully functional with no know bugs.  However, it needs content that 
      use specialized page lists, and that implemention has just started.
      <div style="height:0.75rem;"></div>
      For that reason, behavior is quirky and its recommended that you wait until This 
      notice disappears before spending much time here.
      <div style="height:0.75rem;"></div>
      Then, I believe you will find this facility useful for exploring code and site pages.
      <div style="height:0.75rem;"></div>
      <strong>Note2:</strong><br>
      You can see how the viewer should work by selecting Rust Basics from the table on
      the right.  That example does have the correct page lists.
      <div style="height:0.75rem;"></div>
    </div>
    <h3>Viewer</h3>
    <t-b>
      <ul class="tights" style="line-height: 0.95rem;">
        <li>
          Viewer displays two pages side-by-side, intended for page and code comparisons.
        </li>
        <li>
          Controls are more complicated compared to the other explorers due to
          the dual views.
        </li>
      </ul>
    </t-b>
    <h3>Select Views</h3>
    <t-b>
      <ul class="tights" style="line-height: 0.95rem;">
        <li>
          The table on the left defines two pages to load into left and right views.
        </li>
        <li>
          The right table loads code and its output, e.g., Rust Basics code into left View
          and the output it generates in right view.
        </li>
      </ul>
    </t-b>
    <div style="height:0.0rem;"></div>
    <div id="index-container">
      <div>
        <table class="index-table">
          <tr>
            <th colspan="3">Page Comparisons</th>
          </tr>
          <tr>
            <td style="text-align: center; font-weight:bold;">left view</td><td style="text-align: center; font-weight:bold;">right view</td>
            <td></td>
          </tr>
          <tr>
            <td>Rust Bites</td>
            <td>C++ Bites</td>
            <td class="index-select" onclick="goRBCB()">select</td>
          </tr>
          <tr>
            <td>Rust story</td>
            <td>C++ story</td>
            <td class="index-select undef" onclick="goRSCS()">select</td>
          </tr>
          <tr>
            <td>Rust Track</td>
            <td>C++ Track</td>
            <td class="index-select" onclick="goRTCPPT()">select</td>
          </tr>
          <tr>
            <td>C# Track</td>
            <td>Python Track</td>
            <td class="index-select" onclick="goCSTPT()">select</td>
          </tr>
          <tr>
            <td>Site Design</td>
            <td>Site Demo</td>
            <td class="index-select" onclick="goSDSD()">select</td>
          </tr>
          <tr>
            <td>Basics Track</td>
            <td>Basics Track</td>
            <td class="index-select" onclick="goBTBT()">select</td>
          </tr>
          <tr>
            <td>Exit to:</td>
            <td>Site Explorer</td>
            <td class="index-select" onclick="goSite()">select</td>
          </tr>
          <tr>
            <td>Exit to:</td>
            <td>Code Explorer</td>
            <td class="index-select" onclick="goCode()">select</td>
          </tr>
          <tr>
            <td>Close Index:</td>
            <td>Code Explorer</td>
            <td class="index-select" onclick="hideIndex()">select</td>
          </tr>
        </table>
      </div>
      <div>
        <table class="index-table">
          <tr>
            <th colspan="3">Code Views</th>
          </tr>
          <tr>
            <td style="text-align: center; font-weight:bold;">code - both views</td><td style="text-align: center; font-weight:bold;">content</td>
            <td></td>
          </tr>
          <tr>
            <td>Rust Basics</td>
            <td>Types and Structs</td>
            <td><a class="index-select" onclick="goRBCRBT()">select</a></td>
          </tr>
          <tr>
            <td>Rust Models</td>
            <td>Objects, methods</td>
            <td><a class="index-select undef" href="javascript:;">select</a></td>
          </tr>
          <tr>
            <td>C++ Basics</td>
            <td>Types and Structs</td>
            <td><a class="index-select undef" href="javascript:;">select</a></td>
          </tr>
          <tr>
            <td>C++ Models</td>
            <td>Objects, methods</td>
            <td><a class="index-select undef" href="javascript:;">select</a></td>
          </tr>
        </table>
      </div>
    </div>
  </div>

  <div id="container">
    <div id="picklist" class="hidden" onmouseleave="hideElement('picklist')">
      <div class="pickheader" onclick="hideElement('picklist')">Select to View</div>
      <div onclick="loadPanels('../Rust/RustBasics_Code.html')">Rust Basic Code</div>
      <div onclick="loadPanels('../Rust/RustBasics_Text.html')">Rust Basic Output</div>
      <div class="undef" onclick="loadPanels('javascript:;')">Cpp Basic Code</div>
      <div class="undef" onclick="loadPanels('javascript:;')">Cpp Basic Output</div>
      <div onclick="loadPanels('../Rust/RustBites_Intro.html')">Rust Bites Intro</div>
      <div onclick="loadPanels('../Cpp/CppBites_Intro.html')">C++ Bites Intro</div>
      <div onclick="loadPanels('../Rust/RustStory_Prologue.html')">Rust Story Prologue</div>
      <div class="undef" onclick="loadPanels('javascript:;')">C++ Story Prologue</div>
    </div>
      <div id="control-panel">
      <div id="nav">
        <div style="height:1.25rem;"></div>
        <!-- <clkwrap><a class="clickable" onclick="setbg(this)" target="l-panel" href="CodeHome.html">Code Home</a></clkwrap>
        <div style="height: 0.75rem;"></div> -->
        <details id="code-repros" open>
          <summary>Load Page</summary>
          <clkwrap><a id="left" class="clickable" onclick="selectLeft(this)">left pane</a></clkwrap>
          <clkwrap><a id="right" class="clickable" onclick="selectRight(this)">right pane</a></clkwrap>
          <clkwrap><a id="both" class="clickable" onclick="selectBoth(this)">both panes</a></clkwrap>
          <div style="height:0.25rem;"></div>
        </details>
        <!-- <div style="height: 0.75rem;"></div> -->
        <details id="code-repros">
          <summary>Code Repos</summary>
          <clkwrap><a class="clickable" onclick="setbg(this)" target="rpanel" href="../Rust/ExploreRust.html?src=RustRepos.html">Rust Repos</a></clkwrap>
          <clkwrap><a class="clickable" onclick="setbg(this)" target="rpanel" href="../Cpp/ExploreCpp.html?src=CppRepos.html">CppRepos</a></clkwrap>
          <a style="margin-left:0.5rem;" class="unclickable undef" target="_self" href="javascript:;">C# Repos</a>
          <a style="margin-left:0.5rem;" class="unclickable undef" target="_self" href="javascript:;">Python Repos</a>
          <a style="margin-left:0.5rem;" class="unclickable undef" target="_self" href="javascript:;">WebDev Repos</a>
          <a style="margin-left:0.5rem;" class="unclickable undef" target="_self" href="javascript:;">Other Repos</a>
          <div style="height:0.25rem;"></div>
        </details>
        <div style="height:0.75em;"></div>
        <!-- <a class="clicked" onclick="setbg(this)" target="_blank" href="Tests/GridExplore.html">Test GridExplore</a> -->
        <clkwrap><a class="clickable" onclick="setbg(this)" target="_blank" href="https://chatgpt.com">ChatGPT</a></clkwrap>
        <div style="height:1.0em;"></div>
      </div>
    </div>
    <div id="panel-container">
      <div id="leftPanel" class="panel">
        <iframe id="lpgframe" style="height:100%; width:100%; border:6px solid black;" src="https://example.com" name="l-panel"></iframe>
      </div>
      <div id="rightPanel" class="panel">
        <iframe id="rpgframe" style="height:100%; width:100%; border:6px solid black;" src="https://example.com" name="r-panel"></iframe>
      </div>
    </div>
  </div>
  
  <div id="grid-controls" class="grid-controls">
    <div class="label">View Controls</div>
    <button onclick="occupyRightPanel()">Full Right Panel</button>
    <button onclick="makeLeftLarger()">Left Panel Larger</button>
    <button onclick="centerPanels()">Center Panels</button>
    <button onclick="makeRightLarger()">Right Panel Larger</button>
    <button onclick="occupyLeftPanel()">Full Left Panel</button>
    <button onclick="presetRightPanelWidth(0.40)">Preset Panel Width</button>
  </div>
  <div id="setgetwidth" class="grid-controls" style="bottom:calc(var(--bottommenuh) + 6.2rem);">
    <div class="label">Custom Preset</div>
    <button onclick="setRightPanelWidth()">Save Layout</button>
    <button onclick="selectRightPanelWidth()">Select Layout</button>
  </div>
  <!-- <div style="height:20px;"></div> -->
  <!-- <div class="grid-controls" style="bottom:3rem;">
    <button onclick="togglePanel()">toggle control panel</button>
  </div> -->

  <a id="control-elements"></a>
  <div id="controls" class="controller" style="text-align: left;">
    <div class="label">Page Controls</div>
    <!-- <div style="font-size:0.8rem; font-weight:bold; margin:0rem 0rem 0.5rem 0rem;"> -->
    <div class="up-down">
      <button id="up-button" onclick="postMsg(makeMsg('up'))">Prev Sect</button>
      <button id="down-button" onclick="postMsg(makeMsg('down'))">Next Sect</button>
    </div>
    <div class="next-prev">
      <button id="prev-button" onclick="postMsg(makeMsg('prev'))">Prev Page</button>       
      <button id="next-button" onclick="postMsg(makeMsg('next'))">Next Page</button>
    </div>
    <div class="sections-pages">
      <button id="sections-button" onclick="postMsg(makeMsg('sections'))">sect list</button>
      <button id="pages-button" onclick="postMsg(makeMsg('pages'))">pages list</button>
    </div>
  </div>
  <div id="bottomMenu">
    <button id="lpanelbutton" class="bottomMenuButton visible" style="margin-left:0.0rem; width:10rem;" onclick="togglePanel()">
      Toggle ctrl pane
    </button>
    <div class="rightGroup">
      <div class="buttonSpacer"></div>
      <button id="bottom-info" class="bottomMenuButton visible" onclick="showBottomMenuInfo()">
        ?
      </button>
      <button class="bottomMenuButton" onclick="postMsg(makeMsg('clear'))">
        clear
      </button>
      <button class="bottomMenuButton" onclick="toggleControls()">
        Controls
      </button>
      <button class="bottomMenuButton" onclick="postMsg(makeMsg('about'))">
        About
      </button>
      <button class="bottomMenuButton" onclick="postMsg(makeMsg('keys'))">
        Keys
      </button>
      <button class="bottomMenuButton" onclick="postMsg(makeMsg('sections'))">
        Sections
      </button>
      <button class="bottomMenuButton" onclick="postMsg(makeMsg('pages'))">
        Pages
      </button>
      <button class="bottomMenuButton" onclick="postMsg(makeMsg('prev'))">
        Prev
      </button>
      <button class="bottomMenuButton" onclick="postMsg(makeMsg('next'))">
        Next
      </button>
      <div class="buttonSpacer"></div>
      <div id="filename" style="border:none;"></div>
      <div class="buttonSpacer"></div>
      </div>
  </div>
  <!-- This script block must reside at bottom of file -->
  <script defer>
    let selector = "both";
    let leftPanel = document.getElementById("lpgframe");
    let rightPanel = document.getElementById("rpgframe");
    function selectLeft(elem) {
      setbg(elem);
      selector = "left";
      showElement('picklist');
      // document.querySelectorAll("#topMenu a").forEach(link => {
      //   link.target = "l-panel";
      // });      
    }
    function selectRight(elem) {
      setbg(elem);
      selector = "right";
      showElement('picklist');
      // document.querySelectorAll("#topMenu a").forEach(link => {
      //   link.target = "r-panel";
      // });      
    }
    function selectBoth(elem) {
      setbg(elem);
      selector = "both";
      showElement('picklist');
    }
    function loadPanels(url) {
      if(selector === "left") {
        leftPanel.src = url;
        return;
      }
      if(selector === "right") {
        rightPanel.src = url;
        return;
      }
      leftPanel.src = url;
      rightPanel.src = url;
    }
  </script>
</body>
</html>
