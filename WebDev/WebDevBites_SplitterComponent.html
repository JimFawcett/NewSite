<!DOCTYPE html>
<html id="top">
<!--
  WebDevBites_SplitterComponent.html
-->
<head>
  <title>WebDev Bite Splitter Component</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
  <link rel="stylesheet" href="../css/reset.css" />
  <link rel="stylesheet" href="../css/ContentMenus.css" />
  <link rel="stylesheet" href="../css/Content.css" />
  <link rel="stylesheet" href="../css/help.css" />
  <link rel="stylesheet" href="../css/ThemeWebDev.css" />
  <link rel="stylesheet" href="../css/StylesPhoto.css" />
  <link rel="stylesheet" href="../css/StylesSizerComp.css" />
  <link rel="stylesheet" href="../css/StylesWebComponents.css" />
  <script src="../js/ScriptsWebComponents.js"></script>
  <script src="../js/Content.js"></script>
  <script src="../js/ContentMenus.js"></script>
  <script src="../js/SitePagesForTools.js"></script>
  <link rel="stylesheet" href="../css/FigureSizer.css" />
  <script src="../js/FigureSizer.js"></script>
  <script src="js/SplitterComponent.js"></script>
  <link rel="stylesheet" href="../css/link-nav.css" />
  <link rel="stylesheet" href="../css/content-links.css" />
  <script src="../js/cookies.js"></script>
  <script src="../js/contentElements.js"></script>
  <script src="../js/contentMessages.js"></script>
  <link rel="stylesheet" href="../css/prism.css">
  <script src="../js/prism.js"></script>
  <style>
    .menuHeader {
      padding:0.0rem 0.5rem 0.25rem 0.5rem;
    }
  </style>
  <style>
    splitter-container {
      --dark: maroon;
    }
    .indent {
      margin-left:2rem;
      margin-right:2rem;
      margin:1rem 1rem;
    }
  </style>
  <script>
    function loadInExplorer() {
      const loc = window.location;
      if(loc === window.top.location) {
        window.location = "ExploreSWDev.html?src=" + loc;
      }
    }
    function load() {
      loadInExplorer();
      buildBottomMenu();
      postFileName();
      setPersistantElements();
    }
  </script>
  <style>
    #github #statustable {
      table-layout: fixed;
      width: calc(100% - 0rem);
    }
    #github td {
      vertical-align: top;
      line-height: 1rem;
    }
  </style>
</head>
<body id="github" onload="load()">

  <!-- <a id="next" class="hidden" href="CppRepos.html"></a>
  <a id="prev" class="hidden" href="CppRepos.html"></a> -->

  <!-- show-hide with 'about' message -->
  <div id="about" class="hidden" onclick="this.classList.toggle('hidden')">
    WebDevBites_SplitterComponent.html<br />
    copyright &copy; James Fawcett<br />
    Revised: 07/30/2025
  </div>

  <content-block>
    <header>
      <!--<a class="repoLink" href="https://github.com/JimFawcett">JimFawcett Repositories</a>-->
      <div id="pagetitle" class="header">
        <h2 id="title">WebDev Bites: Splitter Component</h2>
        <h4 id="subtitle" class="indent">
          two panel view with splitter bar
        </h4>
      </div>
      <div class="header" style="position:relative; padding:0.0em 0em 0.25em 0em; margin-top:0.125em; border:2px solid var(--dark);">
        <a class="repoLinks" target="_blank" href="https://github.com/JimFawcett" style="color:var(--atten); margin-top:0.25em; margin-left:1.5em;">About</a>
        <a class="repoLinks" target="_self" href="SWDevHome.html" style="color:var(--atten); margin-left:1rem;">SWDev Track</a>
      </div>

      <!--<div style="padding-right:25px; position:absolute; top:1.1em; right:13em; z-index:5;">-->
    </header>
    <div style="height:1rem;"></div>
    <h2>Splitter Component Demo</h2>
    <div style="height:0.75rem;"></div>
    <inset>
      click in panel to enlarge
    </inset>
    <h3 class="indent">Using default bar position</h3>
    <splitter-container style="height: 10rem; width: 70%;">
      <div slot="first">
        <pre><code>  import std;
      int main() {
        std::cout << "\n  Hello Splitter\n\n";
      }
        </code></pre>
      </div>
      <div slot="second">
        <div style="padding:0rem 1rem;">
          <p>Output here</p>
        </div>
      </div>
    </splitter-container>

    <div style="height:0.75rem;"></div>
    <h3 class="indent">Using left-width="24rem" bar position</h3>
    <!-- <div style="height:0.5rem;"></div> -->
    <splitter-container left-width="24rem" style="height: 10rem; width: 70%;">
      <div slot="first">
        <pre><code>  import std;
      int main() {
        std::cout << "\n  Hello Splitter\n\n";
      }
        </code></pre>
      </div>
      <div slot="second">
        <div style="padding:0rem 1rem;">
          <p>Output here</p>
        </div>
      </div>
    </splitter-container>
    <div style="height:1rem;"></div>
    <h3>Source Code</h3>
  <div style="padding:1rem; padding-left:0rem;">
    <figure-sizer id="fig1" style="width:max-content;">
      <div class="caption" onclick="smaller('fig1')">Figure 1. Splitter Component Code</div>
      <div class="content" onclick="bigger('fig1')">
        <pre><code class="language-term">//-----------------------------------------------
// usage example
//-----------------------------------------------
// &lt;!-- usage: defaults to 50/50 split --&gt;
// &lt;splitter-container style=&quot;height:300px;&quot;&gt;
//   &lt;div slot=&quot;first&quot;&gt;.left content.&lt;/div&gt;
//   &lt;div slot=&quot;second&quot;&gt;.right content.&lt;/div&gt;
// &lt;/splitter-container&gt;

// &lt;!-- usage: left pane starts at 200px wide --&gt;
// &lt;splitter-container left-width=&quot;200px&quot; style=&quot;height:300px;&quot;&gt;
//   &lt;div slot=&quot;first&quot;&gt;.left content.&lt;/div&gt;
//   &lt;div slot=&quot;second&quot;&gt;.right content.&lt;/div&gt;
// &lt;/splitter-container&gt;
//-----------------------------------------------

// SplitterComponent.js

class SplitterContainer extends HTMLElement {
  static get observedAttributes() {
    return ['left-width'];
  }

  constructor() {
    super();
    this._step    = 100;   // click-resize step in px
    this._minPane = 30;    // minimum pane width in px

    const shadow = this.attachShadow({ mode: 'open' });
    shadow.innerHTML = `
      &lt;style&gt;
        :host { display: block; width:100%; }
        .container {
          display: flex;
          width:100%; height:100%; overflow:hidden;
          border:3px solid var(--dark,#333);
        }
        .pane {
          background:#eee; overflow:auto; user-select:none;
        }
        .pane.first {
          width: var(--left-width,50%);
          flex: 0 0 auto;
        }
        .pane.second {
          flex: 1 1 auto;
        }
        .splitter {
          flex: 0 0 10px;
          margin: 0 0.25rem;
          background: var(--dark,#333);
          cursor: col-resize;
          user-select: none;
        }
      &lt;/style&gt;
      &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;pane first&quot;&gt;&lt;slot name=&quot;first&quot;&gt;&lt;/slot&gt;&lt;/div&gt;
        &lt;div class=&quot;splitter&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;pane second&quot;&gt;&lt;slot name=&quot;second&quot;&gt;&lt;/slot&gt;&lt;/div&gt;
      &lt;/div&gt;
    `;
  }

  connectedCallback() {
    this._applyLeftWidth();
    this._initDrag();
    this._initClickResize();
  }

  attributeChangedCallback(name, oldVal, newVal) {
    if (name === 'left-width') this._applyLeftWidth();
  }

  _applyLeftWidth() {
    const raw = this.getAttribute('left-width');
    if (raw != null) {
      const cleaned = raw.trim().replace(/;$/, '');
      this.style.setProperty('--left-width', cleaned);
    } else {
      this.style.removeProperty('--left-width');
    }
  }

  _initDrag() {
    const splitter  = this.shadowRoot.querySelector('.splitter');
    const firstPane = this.shadowRoot.querySelector('.pane.first');

    splitter.addEventListener('pointerdown', e =&gt; {
      e.preventDefault();
      const startX        = e.clientX;
      const startWidth    = firstPane.getBoundingClientRect().width;
      const hostWidth     = this.getBoundingClientRect().width;
      const splitterWidth = splitter.getBoundingClientRect().width;
      const minW = this._minPane;
      const maxW = hostWidth - splitterWidth - this._minPane;

      const onMove = ev =&gt; {
        let newW = startWidth + (ev.clientX - startX);
        newW = Math.min(Math.max(newW, minW), maxW);
        firstPane.style.width = `${newW}px`;
      };
      const onUp = () =&gt; {
        document.removeEventListener('pointermove', onMove);
        document.removeEventListener('pointerup',   onUp);
      };

      document.addEventListener('pointermove', onMove);
      document.addEventListener('pointerup',   onUp);
    });
  }

  _initClickResize() {
    const firstPane  = this.shadowRoot.querySelector('.pane.first');
    const secondPane = this.shadowRoot.querySelector('.pane.second');
    const splitter   = this.shadowRoot.querySelector('.splitter');

    const clampWidth = w =&gt; {
      const hostWidth     = this.getBoundingClientRect().width;
      const splitterWidth = splitter.getBoundingClientRect().width;
      const minW = this._minPane;
      const maxW = hostWidth - splitterWidth - this._minPane;
      return Math.min(Math.max(w, minW), maxW);
    };

    // expand on left-pane click
    firstPane.addEventListener('click', () =&gt; {
      const curW = firstPane.getBoundingClientRect().width;
      firstPane.style.width = `${clampWidth(curW + this._step)}px`;
    });

    // shrink on right-pane click
    secondPane.addEventListener('click', () =&gt; {
      const curW = firstPane.getBoundingClientRect().width;
      firstPane.style.width = `${clampWidth(curW - this._step)}px`;
    });
  }
}

customElements.define('splitter-container', SplitterContainer);</code></pre>
      </div>
    </figure-sizer>
  </div>
    <div style="height:15em;"></div>
  </content-block>
  <div id="bottomMenu">
    <div id="keys" class="hidden"></div>
    <div id="sections" class="hidden">
      <div class="darkItem listheader" onclick="toggleSections()">Sections</div>
      <div class="menuBody">
        <a href="#top">top</a>
        <a href="#status">status</a>
        <a href="#changes">changes</a>
        <a href="#plans">plans</a>
        <a href="#bottom">bottom</a>
      </div>
    </div>
    <div id="pages" class="hidden"></div>
    <div id="url" class="hidden">url</div>
    <div id="goto" class="hidden">url</div>
  </div>
  <a id="bottom"></a>
  <script src="js/WebDevBitesPages.js"></script>
  <script>buildPages()</script>
  <script>createSiteNavMenu('goto')</script>
  <script src="../js/link-nav.js" defer></script>
  <script>
    setCookie('#pages', 0, 10);
  </script>
</body>
</html>