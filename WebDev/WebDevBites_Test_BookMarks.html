<!DOCTYPE html>
<html id="top">
<!--
  WebDevBites_Test_DropDownList.html
-->
<head>
  <title>DropDown List</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
  <link rel="stylesheet" href="../css/reset.css" />
  <link rel="stylesheet" href="../css/ContentMenus.css" />
  <link rel="stylesheet" href="../css/Content.css" />
  <link rel="stylesheet" href="../css/help.css" />
  <link rel="stylesheet" href="../css/ThemeWebDev.css" />
  <link rel="stylesheet" href="../css/StylesPhoto.css" />
  <link rel="stylesheet" href="../css/StylesSizerComp.css" />
  <link rel="stylesheet" href="../css/StylesWebComponents.css" />
  <script src="../js/ScriptsWebComponents.js"></script>
  <script src="../js/Content.js"></script>
  <script src="../js/ContentMenus.js"></script>
  <link rel="stylesheet" href="../css/FigureSizer.css" />
  <script src="../js/FigureSizer.js"></script>
  <link rel="stylesheet" href="../css/link-nav.css" />
  <link rel="stylesheet" href="../css/content-links.css" />
  <script src="../js/cookies.js"></script>
  <script src="../js/contentElements.js"></script>
  <script src="../js/contentMessages.js"></script>
  <link rel="stylesheet" href="../css/prism.css" />
  <script src="../js/prism.js"></script>
  <script src="../Tests/BookMarks/js/BookMarks.js"></script>
  <script>
    function loadInExplorer() {
      const loc = window.location;
      if(loc === window.top.location) {
        window.location = "ExploreWebDev.html?src=" + loc;
      }
    }
    function load() {
      loadInExplorer();
      buildBottomMenu();
      postFileName();
      postHostMsg(makeMsg('url', location.href));
      setPersistantElements();
    }
  </script>
  <style>
    .menuHeader {
      padding:0.0rem 0.5rem 0.25rem 0.5rem;
    }
  </style>
  <style>
    :root { --gap: 0.75rem; }
    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 0.5rem 1rem;
      background-color: var(--light);
      color: var(--dark);
      /* font: 14px/1.45 system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      color: #222; background: #fafafa; */
    }
    header, footer { margin-bottom: 1rem; }
    header h1 { font-size: 1.25rem; margin: 0 0 0.25rem 0; }
    .layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--gap);
      align-items: start;
    }
    @media (max-width: 900px) {
      .layout { grid-template-columns: 1fr; }
    }
    .card {
      background: #fff; border: 1px solid #e5e5e5; border-radius: 10px;
      padding: 1rem; box-shadow: 0 1px 2px rgba(0,0,0,0.04);
    }
    .controls {
      display: grid; gap: 0.5rem;
      grid-template-columns: 1fr auto auto;
      align-items: center;
    }
    .controls label { grid-column: 1 / -1; display: block; font-weight: 600; }
    .controls input[type="url"] {
      grid-column: 1 / 2; width: 100%; padding: 0.5rem 0.6rem;
      border: 1px solid #ccc; border-radius: 8px;
    }
    .controls button {
      padding: 0.5rem 0.75rem; border: 1px solid #ccc; border-radius: 8px;
      background: #f6f6f6; cursor: pointer;
    }
    .controls button:hover { background: #eee; }
    .status {
      min-height: 1.2em; color: #0a7; font-weight: 600;
      transition: opacity 180ms ease; opacity: 0;
      grid-column: 1 / -1;
    }
    .status.show { opacity: 1; }
    h2 { font-size: 1rem; margin: 0 0 0.5rem 0; }
    .quick ul {
      margin: 0.5rem 0 0; padding: 0 0 0 1rem;
    }
    .quick a { text-decoration: none; }
    .quick a:hover { text-decoration: underline; }
    footer { color: #666; font-size: 0.9rem; }
    noscript { color: #b00; font-weight: 600; }
  </style>

  <script defer>
    // Demo wiring for the BookmarkList library
    document.addEventListener('DOMContentLoaded', () => {
      const statusEl = document.getElementById('status');
      const urlInput  = document.getElementById('url');
      const addBtn    = document.getElementById('add');
      const addCurr   = document.getElementById('add-current');
      const quickList = document.getElementById('quick-add');

      if (!window.BookmarkList) {
        statusEl.textContent = 'Error: BookMarks.js failed to load.';
        statusEl.classList.add('show');
        return;
      }

      // Create the list in the #bookmarks container
      const bookmarks = new BookmarkList('#bookmarks', {
        storageKey: 'demo-bookmarks',
        max: 200
      });
      // Expose for console debugging if you like
      window.demoBookmarks = bookmarks;

      function flash(msg, ok = true) {
        // statusEl.textContent = msg;
        // statusEl.style.color = ok ? '#fe' : '#ed';
        // // statusEl.style.color = ok ? '#0a7' : '#b00';
        // statusEl.classList.add('show');
        // setTimeout(() => statusEl.classList.remove('show'), 1200);
      }

      function addUrl(raw) {
        const val = (raw || '').trim();
        if (!val) return flash('Enter a URL to add.', false);
        try {
          // BookmarkList will normalize relative URLs against the current page
          bookmarks.add(val);
          flash('Added: ' + val);
          urlInput.value = '';
        } catch (e) {
          flash('Invalid URL', false);
        }
      }

      addBtn.addEventListener('click', () => addUrl(urlInput.value));
      urlInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') addUrl(urlInput.value);
      });
      addCurr.addEventListener('click', () => addUrl(location.href));

      // Quick-add demo links
      quickList.addEventListener('click', (e) => {
        const a = e.target.closest('a[data-url]');
        if (!a) return;
        e.preventDefault();
        addUrl(a.dataset.url);
      });
    });
  </script>
</head>
<body id="github" onload="load()">

  <!-- show-hide with 'about' message -->
  <div id="about" class="hidden" onclick="this.classList.toggle('hidden')">
    WebDevBites_Test_BookMarks.html<br />
    copyright &copy; James Fawcett<br />
    Revised: 10/10/2025
  </div>

  <content-block>
    <header>
      <!--<a class="repoLink" href="https://github.com/JimFawcett">JimFawcett Repositories</a>-->
      <div id="pagetitle" class="header">
        <h2 id="title">WebDev Bites: Test BookMarks</h2>
        <h4 id="subtitle" class="indent">
          manage bookmarks list
        </h4>
      </div>
      <div class="header" style="position:relative; padding:0.0em 0em 0.25em 0em; margin-top:0.125em; border:2px solid var(--dark);">
        <a class="repoLinks" target="_blank" href="https://github.com/JimFawcett" style="color:var(--light); margin-top:0.25em; margin-left:1.5em;">About</a>
        <a class="repoLinks" target="_self" href="WebDevHome.html" style="color:var(--light); margin-left:1.5em;">WebDev Track</a>
        <!-- <a class="repoLinks" target="_self" href="WebDevBites_CompImageViewer.html" style="color:var(--light); margin-left:1.5em;">Demo</a>
        <a class="repoLinks" target="_self" href="WebDevBites_CompImageViewerDesign.html" style="color:var(--light); margin-left:1.5em;">Design</a>
        <a class="repoLinks" target="_self" href="WebDevBites_CompImageViewerInterface.html" style="color:var(--light); margin-left:1.5em;">Interface</a> -->
      </div>
    </header>
  <div style="height:0.75rem;"></div>
  <!-- <image-viewer img-src="Components/ImageViewerComponent/pictures/Helmet_CapeCod_2012.jpg" bg-color="var(--light)" title-bg-color="#ccc" img-width="400" style="float:right; margin-right:-1rem;">
    Figure 1. Prototype Viewer
  </image-viewer> -->

  <h3>BookMarks</h3>
  <tm-b>
    Demonstrates management of list to keep bookmarks.
  </tm-b>
  <t-b>
    List links open in new tab. To return here simply close tab.
  </t-b>
  <div style="height:0.25rem;"></div>
  <main class="layout">
    <!-- Controls -->
    <section class="card">
      <h2>Add URLs</h2>
      <div class="controls" role="form" aria-label="Add bookmark">
        <label for="url">URL</label>
        <input id="url" type="url" placeholder="https://example.com/page.html" spellcheck="false" />
        <button id="add" type="button" title="Add typed URL">Add URL</button>
        <button id="add-current" type="button" title="Add the current page">Add Current Page</button>
        <div id="status" class="status" aria-live="polite"></div>
      </div>

      <div class="quick">
        <h2>Quick add samples</h2>
        <ul id="quick-add">
          <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript"
                 data-url="https://developer.mozilla.org/en-US/docs/Web/JavaScript">MDN — JavaScript</a></li>
          <li><a href="https://en.wikipedia.org/wiki/URL"
                 data-url="https://en.wikipedia.org/wiki/URL">Wikipedia — URL</a></li>
          <li><a href="https://example.com/docs/page.html?ref=demo"
                 data-url="https://example.com/docs/page.html?ref=demo">Example — Docs page</a></li>
          <li><a href="https://example.com/docs/page.html?ref=demo#section"
                 data-url="https://example.com/docs/page.html?ref=demo#section">Example — Same page (with hash)</a></li>
        </ul>
        <p style="margin-top:0.5rem;color:#666">
          Tip: Add the last two links in any order—notice the second one moves the first to the top.
        </p>
      </div>
    </section>

    <!-- Live list -->
    <section class="card">
      <h2>Bookmarks</h2>
      <div id="bookmarks" aria-live="polite"></div>
      <p style="margin-top:0.5rem;color:#666">
        The list persists in <code>localStorage</code> under the key <code>demo-bookmarks</code>.
      </p>
    </section>
  </main>
  <div style="height:1.75rem;"></div>
  <t-b>
    To view HTML source right-click anywhere on page and select 
    &quot;View Page Source&quot;.
  </t-b>
  <t-b>
    To view CSS or JS click on links to &quot;css/DropDown.css&quot; and 
    &quot;js/DropDown.js&quot; in the Page Source.
  </t-b>
    <div style="height:15em;"></div>
  </content-block>
  <div id="bottomMenu">
    <div id="keys" class="hidden"></div>
    <div id="sections" class="hidden">
      <div class="darkItem listheader" onclick="toggleSections()">Sections</div>
      <div class="menuBody">
        <a href="#top">top</a>
        <a href="#bottom">bottom</a>
      </div>
    </div>
    <div id="pages" class="hidden"></div>
    <div id="url" class="hidden">url</div>
    <div id="goto" class="hidden">url</div>
  </div>
  <a id="bottom"></a>
  <script src="js/WebDevTestPages.js"></script>
  <script>buildPages()</script>
  <script>createSiteNavMenu('goto')</script>
  <script src="../js/link-nav.js" defer></script>
  <script>
    setCookie('#pages', 1, 10);
  </script>
  <script>
    // Initialize any number of click dropdowns
    createClickDropdown({ buttonId: "clickBtn1", menuId: "clickMenu1" });
    createClickDropdown({ buttonId: "clickBtn2", menuId: "clickMenu2" });

    // Initialize any number of hover dropdowns (stateful)
    createHoverDropdown({ wrapId: "hoverWrap1", buttonId: "hoverBtn1", menuId: "hoverMenu1", graceMs: 180 });
    createHoverDropdown({ wrapId: "hoverWrap2", buttonId: "hoverBtn2", menuId: "hoverMenu2", graceMs: 180 });
  </script>
</body>
</html>