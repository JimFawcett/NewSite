<!DOCTYPE html>
<html id="top">
<!--
  WebDevBites_CompImageViewer.html
-->
<head>
  <title>Image Viewer Design</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
  <link rel="stylesheet" href="../css/reset.css" />
  <link rel="stylesheet" href="../css/ContentMenus.css" />
  <link rel="stylesheet" href="../css/Content.css" />
  <link rel="stylesheet" href="../css/help.css" />
  <link rel="stylesheet" href="../css/ThemeWebDev.css" />
  <link rel="stylesheet" href="../css/StylesPhoto.css" />
  <link rel="stylesheet" href="../css/StylesSizerComp.css" />
  <link rel="stylesheet" href="../css/StylesWebComponents.css" />
  <script src="../js/ScriptsWebComponents.js"></script>
  <script src="../js/Content.js"></script>
  <script src="../js/ContentMenus.js"></script>
  <link rel="stylesheet" href="../css/FigureSizer.css" />
  <script src="../js/FigureSizer.js"></script>
  <link rel="stylesheet" href="../css/link-nav.css" />
  <link rel="stylesheet" href="../css/content-links.css" />
  <script src="../js/cookies.js"></script>
  <script src="../js/contentElements.js"></script>
  <script src="../js/contentMessages.js"></script>
  <link rel="stylesheet" href="../css/prism.css" />
  <script src="../js/prism.js"></script>
  <!-- <script src="Components/ImageViewerComponent/js/ImageViewer.js" defer></script> -->
  <script src="../js/SpacerComponent.js" defer></script>
  <!-- <link rel="stylesheet" href="../css/TwoPanelComponentRefactored.css"> -->
  <script src="../js/TwoPanelComponentRefactored.js" defer></script>
  <script>
    function loadInExplorer() {
      const loc = window.location;
      if(loc === window.top.location) {
        window.location = "ExploreWebDev.html?src=" + loc;
      }
    }
    function load() {
      loadInExplorer();
      buildBottomMenu();
      postFileName();
      postHostMsg(makeMsg('url', location.href));
      setPersistantElements();
    }
  </script>
  <style>
    .menuHeader {
      padding:0.0rem 0.5rem 0.25rem 0.5rem;
    }
  </style>
  <style>
    code {
      background: #eef;
      padding: 0 3px;
      border-radius: 3px;
    }
  </style>
  <style>
    html, body {
      height: 100%;
      width: 100%;
    }
    /* :root {
      --dark: #12062d;
      --light: #fefefa;
    } */
    body {
      padding:0.5rem 1rem;
      font-family: sans-serif;
    }
    demo {
      display:flex;
      flex-direction: row;
      padding: 0.5rem 1rem;
    }
    left {
      width: 32rem;
      padding: 0.25rem 0.5rem;
      border:1px solid black;
    }
    right {
      display:inline-block;
      /* padding: 0rem 0.5rem; */
      min-width: 1rem;
      border:1px solid black;
      background-color: lightblue;
    }
  </style>
  <style>
    :root { --two-gap: .75rem; --two-panel-border: 1px solid #d0d0d7; --two-panel-pad: .5rem; }
    /* body { margin:0; font:20px/1.3 system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:#fafafa; } */
    .page { max-width:1100px; margin:2rem auto; padding:0 1rem; }
    .toolbar { display:flex; gap:.5rem; flex-wrap:wrap; margin:.5rem 0 .75rem; }
    .toolbar button { padding:.3rem .75rem; border:1px solid #c8c8d0; border-radius:8px; background:#fff; }
    .toolbar button:disabled { opacity:.55; border-color:#bbb; cursor:not-allowed; }
    .left-item { padding-right: 0.25rem; }
    .left-item h3 { font-size:0.9rem; }
    .left-item h3 { margin:.1rem 0 .25rem; font-size:1rem; }
    .code-card { background:#2d2d2d; color:#eee; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,.08); }
    .code-card pre { margin:0; padding:.75rem 1rem; overflow:auto; font:0.95rem/1.5 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
  </style>
  <script>
    // keep indentation; just trim leading & trailing blank lines
    if (Prism.plugins.NormalizeWhitespace) {
      Prism.plugins.NormalizeWhitespace.setDefaults({
        'remove-trailing': false,
        'remove-indent':   false,
        'left-trim':       true,   // trims first line if it’s blank
        'right-trim':      true    // trims last line if it’s blank
      });
    }
  </script>
</head>
<body id="github" onload="load()">

  <!-- show-hide with 'about' message -->
  <div id="about" class="hidden" onclick="this.classList.toggle('hidden')">
    WebDevBites_CompSpacer.html<br />
    copyright &copy; James Fawcett<br />
    Revised: 10/08/2025
  </div>

  <content-block>
    <header>
      <!--<a class="repoLink" href="https://github.com/JimFawcett">JimFawcett Repositories</a>-->
      <div id="pagetitle" class="header">
        <h2 id="title">WebDev Bites: Spacer Component Design</h2>
        <h4 id="subtitle" class="indent">
          design of horizontal and vertical spacer elements 
        </h4>
      </div>
      <div class="header" style="position:relative; padding:0.0em 0em 0.25em 0em; margin-top:0.125em; border:2px solid var(--dark);">
        <a class="repoLinks" target="_blank" href="https://github.com/JimFawcett" style="color:var(--light); margin-top:0.25em; margin-left:1.5em;">About</a>
        <a class="repoLinks" target="_self" href="WebDevBites_WebComponents.html" style="color:var(--atten); margin-left:1rem;">Components</a>
        <a class="repoLinks" target="_self" href="WebDevBites_Components.html" style="color:var(--light); margin-left:1.5em;">Introduction</a>
        <a class="repoLinks" target="_self" href="WebDevBites_CompSpacer.html" style="color:var(--light); margin-left:1.5em;">Demo</a>
        <a class="repoLinks" target="_self" href="WebDevBites_CompSpacerDesign.html" style="color:var(--light); margin-left:1.5em;">Design</a>
        <a class="repoLinks" target="_self" href="WebDevBites_CompSpacerInterface.html" style="color:var(--light); margin-left:1.5em;">Interface</a>
      </div>
    </header>
    <v-s>1rem</v-s>

    <div class="toolbar">
      <button data-two="narrow"      data-two-for="#panel" data-step="6rem">Narrow</button>
      <button data-two="reset"       data-two-for="#panel">Reset</button>
      <button data-two="widen"       data-two-for="#panel" data-step="6rem">Widen</button>
      <button data-two="toggle-left" data-two-for="#panel">Toggle Left</button>
      <button id="prevBtn" data-two="prev" data-two-for="#panel">Prev</button>
      <button id="nextBtn" data-two="next" data-two-for="#panel">Next</button>
    </div>

    <x-two-panel id="panel" class="with-buttons" left="20rem" height="70vh"
      data-desc-selector=".left-item"
      data-right-selector=".right-item">

      <!-- LEFT: descriptions (index 0..n-1) -->
      <div slot="left" class="left-slot">
        <div class="left-item">
          <h3>1) Structure</h3>
          <t-b>
            This view illustrates component structure. 
          </t-b>
          <t-b>
            The JavaScript syntax:
            <inset><pre><code>(() => {
  /* code here */
})();</code></pre></inset>
            defines a function with no parameters. The outer () turns the anonymous 
            function definition into an expression. The trialing () causes the code 
            to be executed immediately.
          </t-b>
          <t-b>
            The block of code starting at line 42 defines the Horizontal Spacer component. 
          </t-b>
          <t-b>
            The block of code starting at line 95 defines the Vertical Spacer component.
          </t-b>
          <t-b>
            Code starting at line 141 defines the tag names associated with these components.
          </t-b>
        </div>
        <div class="left-item">
          <h3>2) HSpace Definition</h3>
          <t-b>
            Horizontal component definition.
          </t-b>
          <t-b>
            The horizontal spacer definition begins at line 44. That defines a 
            JavaScript class derived from HTMLElement.
          </t-b>
          <t-b>
            Line 45 defines public attributes used to modify a specific instance's properties.
          </t-b>
          <t-b>
            Lines 47-90 define component styles and structure: an element with no child elements 
            in a constructor that runs as soon as the code is parsed.
          </t-b>
          <t-b>
            :host represents the root of the component element. slot defines a place to 
            insert content, e.g., size of the space.
          </t-b>
          <t-b>
            Lines 71-85 define event handling for component.
          </t-b>
          <t-b>
            Lines 87-90 handle size and thickness attributes.
          </t-b>
        </div>
        <div class="left-item">
          <h3>2) VSpace Definition</h3>
          <t-b>
            Vertical component definition.
          </t-b>
          <t-b>
            Vertical spacer definition begins at line 97. That defines a 
            JavaScript class derived from HTMLElement.
          </t-b>
          <t-b>
            Line 98 defines public attributes used to modify a specific instance's properties.
          </t-b>
          <t-b>
            Lines 100-120 define component styles and structure: an element with no child elements 
            in a constructor that runs as soon as the code is parsed.
          </t-b>
          <t-b>
            :host represents the root of the component element. slot defines a place to 
            insert content, e.g., size of the space.
          </t-b>
          <t-b>
            Lines 125-133 define event handling for component.
          </t-b>
          <t-b>
            Lines 136 and 136 handle size attribute.
          </t-b>
        </div>
        <div class="left-item">
          <h3>4) Helpers and Attributes</h3>
          <t-b>
            Lines 8-16 convert unitless specifier [v] to [v]rem;
          </t-b>
          <t-b>
            Lines 18-31 evaluate the length which may be presented as:
            <ul class="tight">
              <li>text node content</li>
              <li>attribute specified in opening tag</li>
              <li>style defined by host</li>
            </ul>
            and return as css value.
          </t-b>
          <t-b>
            Lines 33-40 evaluate the vertical thickness which may be presented as:
            <ul class="tight">
              <li>attribute specified in opening tag</li>
              <li>propertye value set by JavaScript</li>
            </ul>
            and return as css value.
          </t-b>
          <t-b>
            Lines 142-145 define tag names associated with this component.
          </t-b>
        </div>
      </div>

      <!-- RIGHT: code/content (index 0..n-1) -->
      <div slot="right" class="right-slot">
        <section class="right-item code-card">
<pre><code class="language-javascript">  1 /* SpacerComponent.js
  2   Horizontal and Vertical Spacer Components
  3   - content may be provided in any of the conventional space metrics.
  4   - space may be either declared as element content or as attribute.
  5 */
  6 (() =&gt; {
      /* code elided */
 42   function defineHSpace(tagName) {
 43     if (customElements.get(tagName)) return;
 44     class HSpace extends HTMLElement {
          /* code elided */
 91     }
 92     customElements.define(tagName, HSpace);
 93   }
 94
 95   function defineVSpace(tagName) {
 96     if (customElements.get(tagName)) return;
 97     class VSpace extends HTMLElement {
          /* code elided
137     }
138     customElements.define(tagName, VSpace);
139   }
140
141   // Define primary tags and short aliases
142   defineHSpace('h-space');
143   defineHSpace('h-s');
144   defineVSpace('v-space');
145   defineVSpace('v-s');
146 })();</code></pre>
        </section>

        <section class="right-item code-card">
<pre><code class="language-javascript">
          /* code elided */
 41
 42   function defineHSpace(tagName) {
 43     if (customElements.get(tagName)) return;
 44     class HSpace extends HTMLElement {
 45       static get observedAttributes() { return ['size', 'block', 'thickness']; }
 46       #mo;
 47       constructor() {
 48         super();
 49         this.attachShadow({ mode: 'open' });
 50         // Host paints the gap; optional thickness shows background/borders if desired.
 51         this.shadowRoot.innerHTML = `
 52           &lt;style&gt;
 53             :host {
 54               display: inline-block;
 55               width: var(--_h-size, 1rem);
 56               height: var(--_h-thickness, 0); /* default 0 to avoid layout shift */
 57               line-height: 0;
 58               color: inherit;
 59               background-color: inherit;
 60               font: inherit;
 61             }
 62             /* Hide any light-DOM children assigned to the default slot */
 63             slot { display: none !important; }
 64           &lt;/style&gt;
 65           &lt;slot&gt;&lt;/slot&gt;
 66         `;
 67         this.setAttribute('aria-hidden', 'true');
 68         this.setAttribute('role', 'presentation');
 69         this.#mo = new MutationObserver(() =&gt; this.#update());
 70       }
 71       connectedCallback() {
 72         this.#mo.observe(this, { characterData: true, childList: true, subtree: true });
 73         this.#update();
 74       }
 75       disconnectedCallback() { this.#mo.disconnect(); }
 76       attributeChangedCallback() { this.#update(); }
 77       #update() {
 78         // Display mode toggle
 79         this.style.display = this.hasAttribute('block') ? 'block' : 'inline-block';
 80         // Size + thickness
 81         const size = pickSize(this, 'h');
 82         const thick = pickThickness(this);
 83         this.shadowRoot.host.style.setProperty('--_h-size', size);
 84         this.shadowRoot.host.style.setProperty('--_h-thickness', thick);
 85       }
 86       // JS property sugar
 87       get size() { return this.getAttribute('size'); }
 88       set size(v) { if (v == null) this.removeAttribute('size'); else this.setAttribute('size', v); }
 89       get thickness() { return this.getAttribute('thickness'); }
 90       set thickness(v) { if (v == null) this.removeAttribute('thickness'); else this.setAttribute('thickness', v); }
 91     }
 92     customElements.define(tagName, HSpace);
 93   }
 94     /* code elided */

146 })();</code></pre>
        </section>

        <section class="right-item code-card">
<pre><code class="language-javascript">    /* code elided */
 94
 95   function defineVSpace(tagName) {
 96     if (customElements.get(tagName)) return;
 97     class VSpace extends HTMLElement {
 98       static get observedAttributes() { return ['size', 'inline']; }
 99       #mo;
100       constructor() {
101         super();
102         this.attachShadow({ mode: 'open' });
103         // Host carries the height directly.
104         this.shadowRoot.innerHTML = `
105           &lt;style&gt;
106             :host {
107               display: block;
108               height: var(--_v-size, 1rem);
109               color: inherit;
110               background-color: inherit;
111               font: inherit;
112             }
113             slot { display: none !important; }
114           &lt;/style&gt;
115           &lt;slot&gt;&lt;/slot&gt;
116         `;
117         this.setAttribute('aria-hidden', 'true');
118         this.setAttribute('role', 'presentation');
119         this.#mo = new MutationObserver(() =&gt; this.#update());
120       }
121       connectedCallback() {
122         this.#mo.observe(this, { characterData: true, childList: true, subtree: true });
123         this.#update();
124       }
125       disconnectedCallback() { this.#mo.disconnect(); }
126       attributeChangedCallback() { this.#update(); }
127       #update() {
128         // Display mode toggle (inline vertical spacer)
129         this.style.display = this.hasAttribute('inline') ? 'inline-block' : 'block';
130         // Size
131         const size = pickSize(this, 'v');
132         this.shadowRoot.host.style.setProperty('--_v-size', size);
133       }
134       // JS property sugar
135       get size() { return this.getAttribute('size'); }
136       set size(v) { if (v == null) this.removeAttribute('size'); else this.setAttribute('size', v); }
137     }
138     customElements.define(tagName, VSpace);
139   }
140
        /* code elided */
</code></pre>
        </section>

        <section class="right-item code-card">
<pre><code class="language-javascript">
        /* code elided */
  8   const numberRE = new RegExp('^&#92;s*&#92;d+(?:&#92;.&#92;d+)?&#92;s*$'); // 12 or 12.5 (no unit)
  9
 10   function asCssLength(val, fallback = '1rem') {
 11     if (val == null) return fallback;
 12     const s = String(val).trim();
 13     if (s === '') return fallback;
 14     if (numberRE.test(s)) return `${s}rem`; // unitless -&gt; rems
 15     return s; // assume valid CSS length or var()/calc()
 16   }
 17
 18   function pickSize(el, kind /* 'h'|'v' */) {
 19     // 1) attribute
 20     const attr = el.getAttribute('size');
 21     if (attr && attr.trim() !== '') return asCssLength(attr);
 22     // 2) inner text (do NOT clear; hidden via shadow &lt;slot&gt;)
 23     const inline = (el.textContent || '').trim();
 24     if (inline) return asCssLength(inline);
 25     // 3) CSS var on the host
 26     const varName = (kind === 'h') ? '--h-space-size' : '--v-space-size';
 27     const cssVar = el.style.getPropertyValue(varName) || getComputedStyle(el).getPropertyValue(varName);
 28     if (cssVar && cssVar.trim() !== '') return asCssLength(cssVar);
 29     // 4) default
 30     return '1rem';
 31   }
 32
 33   function pickThickness(el) {
 34     // attribute &gt; CSS var &gt; default 0
 35     const attr = el.getAttribute('thickness');
 36     if (attr && attr.trim() !== '') return asCssLength(attr, '0');
 37     const cssVar = el.style.getPropertyValue('--h-thickness') || getComputedStyle(el).getPropertyValue('--h-thickness');
 38     if (cssVar && cssVar.trim() !== '') return asCssLength(cssVar, '0');
 39     return '0';
 40   }
 41
        /* code elided /
140
141   // Define primary tags and short aliases
142   defineHSpace('h-space');
143   defineHSpace('h-s');
144   defineVSpace('v-space');
145   defineVSpace('v-s');
146 })();</code></pre>
        </section>

      </div>
    </x-two-panel>
    
  </content-block>
  <div id="bottomMenu">
    <div id="keys" class="hidden"></div>
    <div id="sections" class="hidden">
      <div class="darkItem listheader" onclick="toggleSections()">Sections</div>
      <div class="menuBody">
        <a href="#top">top</a>
        <a href="#bottom">bottom</a>
      </div>
    </div>
    <div id="pages" class="hidden"></div>
    <div id="url" class="hidden">url</div>
    <div id="goto" class="hidden">url</div>
  </div>
  <a id="bottom"></a>
  <script src="js/WebDevCompPages.js"></script>
  <script>buildPages()</script>
  <script>createSiteNavMenu('goto')</script>
  <script src="../js/link-nav.js" defer></script>
  <script>
    setCookie('#pages', 1, 10);
  </script>
</body>
</html>