<!DOCTYPE html>
<html id="top">
<!--
  WebDevBites_CompImageViewerDesign.html — Option B (marks outside <code>)
-->
<head>
  <title>WebDev ImageViewer</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
  <link rel="stylesheet" href="../css/reset.css" />
  <link rel="stylesheet" href="../css/ContentMenus.css" />
  <link rel="stylesheet" href="../css/Content.css" />
  <link rel="stylesheet" href="../css/help.css" />
  <link rel="stylesheet" href="../css/ThemeWebDev.css" />
  <link rel="stylesheet" href="../css/StylesPhoto.css" />
  <link rel="stylesheet" href="../css/StylesSizerComp.css" />
  <link rel="stylesheet" href="../css/StylesWebComponents.css" />
  <script src="../js/ScriptsWebComponents.js"></script>
  <script src="../js/Content.js"></script>
  <script src="../js/ContentMenus.js"></script>
  <link rel="stylesheet" href="../css/FigureSizer.css" />
  <script src="../js/FigureSizer.js"></script>
  <link rel="stylesheet" href="../css/link-nav.css" />
  <link rel="stylesheet" href="../css/content-links.css" />
  <script src="../js/cookies.js"></script>
  <script src="../js/contentElements.js"></script>
  <script src="../js/contentMessages.js"></script>
  <link rel="stylesheet" href="../css/prism.css" />
  <script src="../js/prism.js"></script>
  <!-- Component -->
  <script src="../js/TwoPanelComponentRefactored.js" defer></script>

  <script>
    function loadInExplorer() {
      const loc = window.location;
      if (loc === window.top.location) {
        window.location = "ExploreWebDev.html?src=" + loc;
      }
    }
    function load() {
      loadInExplorer();
      buildBottomMenu();
      postFileName();
      postHostMsg(makeMsg('url', location.href));
      setPersistantElements();
    }
  </script>

  <style>
    .menuHeader { padding:0.0rem 0.5rem 0.25rem 0.5rem; }
    code {
      /* background: #eef; */
      padding: 0 3px;
      border-radius: 3px;
    }
  </style>
  <!-- load Prism & NormalizeWhitespace -->
  <link rel="stylesheet" href="../css/prism.css">
  <script src="../js/prism.js"></script>
  <!-- <script src="../js/prism.js"></script> -->
  <script>
    // keep indentation; just trim leading & trailing blank lines
    if (Prism.plugins.NormalizeWhitespace) {
      Prism.plugins.NormalizeWhitespace.setDefaults({
        'remove-trailing': false,
        'remove-indent':   false,
        'left-trim':       true,   // trims first line if it’s blank
        'right-trim':      true    // trims last line if it’s blank
      });
    }
  </script>
  <style>
    html, body {
      height: 100%;
      width: 100%;
    }
    /* :root {
      --dark: #12062d;
      --light: #fefefa;
    } */
    body {
      padding:0.5rem 1rem;
      font-family: sans-serif;
    }
    demo {
      display:flex;
      flex-direction: row;
      padding: 0.5rem 1rem;
    }
    left {
      width: 32rem;
      padding: 0.25rem 0.5rem;
      border:1px solid black;
    }
    right {
      display:inline-block;
      /* padding: 0rem 0.5rem; */
      min-width: 1rem;
      border:1px solid black;
      background-color: lightblue;
    }
  </style>
  <style>
    :root { --two-gap: .75rem; --two-panel-border: 1px solid #d0d0d7; --two-panel-pad: .5rem; }
    /* body { margin:0; font:20px/1.3 system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:#fafafa; } */
    .page { max-width:1100px; margin:2rem auto; padding:0 1rem; }
    .toolbar { display:flex; gap:.5rem; flex-wrap:wrap; margin:.5rem 0 .75rem; }
    .toolbar button { padding:.3rem .75rem; border:1px solid #c8c8d0; border-radius:8px; background:#fff; }
    .toolbar button:disabled { opacity:.55; border-color:#bbb; cursor:not-allowed; }
    .left-item { padding-right: 0.5rem; }
    .left-item h3 { font-size:0.9rem; }
    .left-item h3 { margin:.1rem 0 .25rem; font-size:1rem; }
    .code-card { background:#2d2d2d; color:#eee; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,.08); }
    .code-card pre { margin:0; padding:.75rem 1rem; overflow:auto; font:0.95rem/1.5 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
  </style>
  <script>
    // keep indentation; just trim leading & trailing blank lines
    if (Prism.plugins.NormalizeWhitespace) {
      Prism.plugins.NormalizeWhitespace.setDefaults({
        'remove-trailing': false,
        'remove-indent':   false,
        'left-trim':       true,   // trims first line if it’s blank
        'right-trim':      true    // trims last line if it’s blank
      });
    }
  </script>
</head>
<body id="github" onload="load()">

  <!-- show-hide with 'about' message -->
  <div id="about" class="hidden" onclick="this.classList.toggle('hidden')">
    WebDevBites_CompImageViewerDesign.html<br />
    copyright &copy; James Fawcett<br />
    Revised: 09/24/2025
  </div>

  <content-block>
    <header>
      <div id="pagetitle" class="header">
        <h2 id="title">WebDev Bites: ImageViewer Component Design</h2>
        <h4 id="subtitle" class="indent">W3C web component</h4>
      </div>
      <div class="header" style="position:relative; padding:0.0em 0em 0.25em 0em; margin-top:0.125em; border:2px solid var(--dark);">
        <a class="repoLinks" target="_blank" href="https://github.com/JimFawcett" style="color:var(--light); margin-top:0.25em; margin-left:1.5em;">About</a>
        <a class="repoLinks" target="_self" href="WebDevHome.html" style="color:var(--light); margin-left:1.5em;">WebDev Track</a>
        <a class="repoLinks" target="_self" href="WebDevBites_CompImageViewer.html" style="color:var(--light); margin-left:1.5em;">Demo</a>
        <a class="repoLinks" target="_self" href="WebDevBites_CompImageViewerDesign.html" style="color:var(--light); margin-left:1.5em;">Design</a>
        <a class="repoLinks" target="_self" href="WebDevBites_CompImageViewerInterface.html" style="color:var(--light); margin-left:1.5em;">Interface</a>
      </div>
    </header>

    <div style="height:1rem;"></div>

    <!-- <div class="demo" style="height:calc(100dvh - 10rem);"> -->
      <div class="toolbar">
        <button data-two="narrow"      data-two-for="#buttons-panel" data-step="6rem">Narrow</button>
        <button data-two="reset"       data-two-for="#buttons-panel">Reset</button>
        <button data-two="widen"       data-two-for="#buttons-panel" data-step="6rem">Widen</button>
        <button data-two="toggle-left" data-two-for="#buttons-panel">Toggle Left</button>
      <button id="prevBtn" data-two="prev" data-two-for="#panel">Prev</button>
      <button id="nextBtn" data-two="next" data-two-for="#panel">Next</button>
      </div>

      <!-- data-left-fixed holds left width constant when container resizes -->
      <x-two-panel id="panel" class="with-buttons" left="20rem" height="calc(100dvh - 13.25rem)" left="15rem" data-left-fixed>
        <div slot="left" class="left-slot">
          <div class="left-item">
            <h3>Component Class</h3>
            <t-b>
              The tag <c-s><code>&lt;image-viewer&gt;</code></c-s> creates an instance of the
              ImageViewer class. The class&apos;s first element is a ShadowDOM that isolates 
              the component&apos;s elements and their styles.
            </t-b>
            <t-b>
              That prevents an application&apos;s styles from affecting the component internals.
              Attributes allow an application to affect selected styles defined by the designer.
            </t-b>
          </div>

          <div class="left-item">
            <h3>Shadow DOM</h3>
            <t-b>
              A W3C web component is defined entirely in JavaScript as illustrated in the right 
              panel.
            </t-b>
            <t-b>
              The shadowDOM provides HTML markup and styling for the component using a JavaScript 
              expression &quot;<c-s><code>
                this.shadowRoot.innerHTML = `[markup goes here]`;
            </t-b>
            </code></c-s>.
          </div>

          <div class="left-item">
            <h3>Structure</h3>
            <t-b>
              This markup defines the structure of the image-viewer component. The outer div 
              provides padding to keep content from touching the image-viewer when it is 
              floated to the left or right.
            </t-b>
            <t-b>
              The next div provides the visible part of the component, e.g., its title and 
              image. Note that the img src and width are provided by attributes the  
              application supplies in the <c-s><code>&lt;image-viewer&gt;</code></c-s> 
              declaration.
            </t-b>
          </div>

          <div class="left-item">
            <h3>Listeners</h3>
            <t-b>
              The primary purpose of this component is to enlarge or diminish the size of 
              an image using button clicks on image (enlarge) or title (diminish).
            </t-b>
            <t-b>
              The first listener awaits clicks on the title which contracts the image. 
              The second awaits clicks on the image then enlarges it.
            </t-b>
            <t-b>
              The final piece registers the <c-s><code>&lt;image-viewer&gt;</code></c-s> with 
              this component class. That causes the browser&apos;s rendering engine to create 
              an instance of the ImageViewer class for each occurance of the tag.
            </t-b>
          </div>
        </div>

        <div slot="right" class="right-slot">
          <section class="right-item code-card">
            <pre><code class="language-javascript">
 1 class ImageViewer extends HTMLElement {
 2   constructor() {
 3     super();
 4     this.attachShadow({ mode: 'open' });
 5
 6     // Get attributes
 7     this.imgSrc = this.getAttribute('img-src') || '';
 8     this.imgWidth = this.getAttribute('img-width') || '400';
 9     const hasBgAttr = this.hasAttribute('bg-color');
10     const componentBg = hasBgAttr ? this.getAttribute('bg-color') : 'white';
11     const titleBg = this.getAttribute('title-bg-color') || 'transparent';
12
13     // Wrapper background uses --light fallback to white
14     const wrapperBg = 'var(--light, white)';
15
</code></pre>
          </section>
          <section class="right-item code-card">
<pre><code class="language-javascript">
16     // Shadow DOM markup
17     this.shadowRoot.innerHTML = `
18       &lt;style&gt;
19         :host {
20           display: inline-block; /* allow float and shrink to content */
21         }
22
23         .wrapper {
24           padding: 1rem; /* outer padding to keep text off the border when floated */
25           box-sizing: border-box;
26           background-color: ${wrapperBg};
27         }
28
29         .component {
30           border: 2px solid var(--dark, #333); /* use client's --dark or fallback */
31           padding: 0.5rem;
32           display: flex;
33           flex-direction: column;
34           user-select: none;
35           width: min-content;
36           box-shadow: 5px 5px 5px #999;
37           box-sizing: border-box;
38           background-color: ${componentBg};
39         }
40
41         .title {
42           display: flex;
43           font-family: &quot;Comic Sans MS&quot;, cursive, sans-serif;
44           font-weight: bold;
45           cursor: pointer;
46           max-width: 100%;
47           margin-bottom: 8px;
48           line-height: 1.0rem;
49           flex-wrap: wrap;
50           word-wrap: break-word;
51           overflow-wrap: break-word;
52           white-space: wrap;
53           color: var(--dark, #333); /* title text uses --dark or fallback */
54           background-color: ${titleBg};
55           padding: 0.25rem 0.5rem;
56         }
57
58         .image {
59           display: block;
60           flex: 0 0 auto;
61           cursor: pointer;
62           transition: transform 0.2s ease-in-out;
63         }
64
65         img {
66           display: block;
67           height: auto;
68           /* removed max-width so explicit width adjustments take effect */
69         }
70       &lt;/style&gt;
71
</code></pre>
          </section>
          <section class="right-item code-card">
<pre><code class="language-javascript">
72       &lt;div class=&quot;wrapper&quot;&gt;
73         &lt;div class=&quot;component&quot;&gt;
74           &lt;div class=&quot;title&quot; part=&quot;title&quot;&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/div&gt;
75           &lt;div class=&quot;image&quot;&gt;
76             &lt;img id=&quot;img&quot; src=&quot;${this.imgSrc}&quot; width=&quot;${this.imgWidth}&quot;&gt;
77           &lt;/div&gt;
78         &lt;/div&gt;
79       &lt;/div&gt;
80     `;
81
</code></pre>
          </section>
          <section class="right-item code-card">
<pre><code class="language-javascript">
82     // Event listeners
83     this.titleElement = this.shadowRoot.querySelector('.title');
84     this.imageElement = this.shadowRoot.querySelector('#img');
85
86     this.titleElement.addEventListener('click', () =&gt; this.resizeImage(1 / 1.2));
87     this.imageElement.addEventListener('click', () =&gt; this.resizeImage(1.2));
88   }
89
90   resizeImage(scaleFactor) {
91     const currentWidth = parseFloat(window.getComputedStyle(this.imageElement).width);
92     this.imageElement.style.width = `${currentWidth * scaleFactor}px`;
93   }
94 }
95
96 customElements.define('image-viewer', ImageViewer);
            </code></pre>
          </section>
        <!-- </div> -->
      </x-two-panel>
    </div>
  </content-block>

  <div id="bottomMenu">
    <div id="keys" class="hidden"></div>
    <div id="sections" class="hidden">
      <div class="darkItem listheader" onclick="toggleSections()">Sections</div>
      <div class="menuBody">
        <a href="#top">top</a>
        <a href="#bottom">bottom</a>
      </div>
    </div>
    <div id="pages" class="hidden"></div>
    <div id="url" class="hidden">url</div>
    <div id="goto" class="hidden">url</div>
  </div>
  <a id="bottom"></a>
  <script src="js/WebDevCompPages.js"></script>
  <script>buildPages()</script>
  <script>createSiteNavMenu('goto')</script>
  <script src="../js/link-nav.js" defer></script>
  <script>
    setCookie('#pages', 4, 10);
  </script>

  <script src="js/WebDevCompPages.js"></script>
  <script>buildPages()</script>
  <script>createSiteNavMenu('goto')</script>
  <script src="../js/link-nav.js" defer></script>
  <script>setCookie('#pages', 4, 10);</script>
</body>
</html>
