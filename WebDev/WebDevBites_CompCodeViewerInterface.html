<!DOCTYPE html>
<html id="top">
<!--
  WebDevBites_CompCodeViewer.html
-->
<head>
  <title>WebDev Code Viewer</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
  <link rel="stylesheet" href="../css/reset.css" />
  <link rel="stylesheet" href="../css/ContentMenus.css" />
  <link rel="stylesheet" href="../css/Content.css" />
  <link rel="stylesheet" href="../css/help.css" />
  <link rel="stylesheet" href="../css/ThemeWebDev.css" />
  <link rel="stylesheet" href="../css/StylesPhoto.css" />
  <link rel="stylesheet" href="../css/StylesSizerComp.css" />
  <link rel="stylesheet" href="../css/StylesWebComponents.css" />
  <script src="../js/ScriptsWebComponents.js"></script>
  <script src="../js/Content.js"></script>
  <script src="../js/ContentMenus.js"></script>
  <link rel="stylesheet" href="../css/FigureSizer.css" />
  <script src="../js/FigureSizer.js"></script>
  <link rel="stylesheet" href="../css/link-nav.css" />
  <link rel="stylesheet" href="../css/content-links.css" />
  <script src="../js/cookies.js"></script>
  <script src="../js/contentElements.js"></script>
  <script src="../js/contentMessages.js"></script>
  <link rel="stylesheet" href="../css/prism.css" />
  <script src="../js/prism.js"></script>
  <script src="Components/CodeViewerComponent/js/CodeViewer.js" defer></script>
  <link rel="stylesheet" href="Components/CodeViewerComponent/css/CodeViewer.css">
  <script>
    function loadInExplorer() {
      const loc = window.location;
      if(loc === window.top.location) {
        window.location = "ExploreWebDev.html?src=" + loc;
      }
    }
    function load() {
      loadInExplorer();
      buildBottomMenu();
      postFileName();
      postHostMsg(makeMsg('url', location.href));
      setPersistantElements();
    }
  </script>
  <style>
    .menuHeader {
      padding:0.0rem 0.5rem 0.25rem 0.5rem;
    }
  </style>
  <style>
    code {
      background: #eef;
      padding: 0 3px;
      border-radius: 3px;
    }
  </style>
</head>
<body id="github" onload="load()">

  <!-- show-hide with 'about' message -->
  <div id="about" class="hidden" onclick="this.classList.toggle('hidden')">
    WebDevBites_CompCodeViewerInterface.html<br />
    copyright &copy; James Fawcett<br />
    Revised: 10/25/2025
  </div>

  <content-block>
    <header>
      <!--<a class="repoLink" href="https://github.com/JimFawcett">JimFawcett Repositories</a>-->
      <div id="pagetitle" class="header">
        <h2 id="title" style="font-weight: normal;">WebDev Bites: CodeViewer Component Interface</h2>
        <h4 id="subtitle" class="indent" style="font-weight: normal;">
          resize-able code viewer 
        </h4>
      </div>
      <div class="header" style="position:relative; padding:0.0em 0em 0.25em 0em; margin-top:0.125em; border:2px solid var(--dark);">
        <a class="repoLinks" target="_blank" href="https://github.com/JimFawcett" style="color:var(--light); margin-top:0.25em; margin-left:1.5em;">About</a>
        <a class="repoLinks" target="_self" href="WebDevBites_WebComponents.html" style="color:var(--atten); margin-left:1rem;">Components</a>
        <a class="repoLinks" target="_self" href="WebDevBites_Components.html" style="color:var(--light); margin-left:1.5em;">Introduction</a>
        <a class="repoLinks" target="_self" href="WebDevBites_CompCodeViewer.html" style="color:var(--light); margin-left:1.5em;">Demo</a>
        <a class="repoLinks" target="_self" href="WebDevBites_CompCodeViewerDesign.html" style="color:var(--light); margin-left:1.5em;">Design</a>
        <a class="repoLinks" target="_self" href="WebDevBites_CompCodeViewerInterface.html" style="color:var(--light); margin-left:1.5em;">Interface</a>
      </div>
    </header>
<h3>CodeViewer — Public Interface</h3>
<t-b>
  Element placed on page:
  <inset>
    <c-s>&lt;code-viewer width=&quot;40ch&quot; style=&quot;float:right&quot;&gt;<br>
      &nbsp;&nbsp;&lt;div&gt;Hello World&lt;/div&gt;<br>
    &lt;/code-viewer&gt;</c-s>
  </inset>
</t-b>
<h3>Slots</h3>
<ul>
  <li><strong>(default) title slot</strong><br>
    Content placed directly inside <code>&lt;code-viewer&gt;</code> renders as the title (clickable).
    <pre><code>&lt;code-viewer&gt;Optional Title&lt;/code-viewer&gt;</code></pre>
  </li>
  <li><strong>slot="code"</strong><br>
    Code/content to display. Accepts text nodes, <code>&lt;template&gt;</code>, <code>&lt;pre&gt;</code>, or <code>&lt;code&gt;</code>.
    <pre><code>&lt;code-viewer&gt;
  Title
  &lt;template slot="code"&gt;
    // code here (will render as literal text in non-Prism mode)
  &lt;/template&gt;
&lt;/code-viewer&gt;</code></pre>
  </li>
</ul>

<h3>Attributes</h3>

<h4>Visuals (component &amp; code colors)</h4>
<ul>
  <li><code>bg-color</code> — component background (maps to <code>--component-bg</code>).</li>
  <li><code>title-bg-color</code> — title bar background (maps to <code>--title-bg</code>).</li>
  <li><code>background-color</code> — code area background (maps to <code>--code-bg</code>), default <code>#333</code>.</li>
  <li><code>color</code> — code foreground (maps to <code>--code-fg</code>), default <code>#eee</code>.</li>
</ul>

<h4>Sizing &amp; Typography</h4>
<ul>
  <li><code>width</code> — width of the visible code box (e.g., <code>50ch</code>, <code>28rem</code>, <code>520px</code>).</li>
  <li><code>height</code> — height of the visible code box; defaults to auto.</li>
  <li><code>overflow-x</code> — horizontal overflow policy; default <code>auto</code>.</li>
  <li><code>font-family</code> — font family applied to visible element(s).</li>
  <li><code>font-size</code> — font size applied to visible element(s).</li>
  <li><code>code-padding</code> — padding inside code box; default <code>0.75rem 1rem</code>.</li>
</ul>

<h4>Highlighting (Prism Integration)</h4>
<ul>
  <li><code>highlight</code> — set to <code>"prism"</code> to use slotted <code>&lt;pre&gt;&lt;code&gt;</code> with Prism highlighting.</li>
  <li><code>language</code> — language ID (e.g., <code>javascript</code>, <code>cpp</code>); adds <code>language-*</code> classes to <code>&lt;pre&gt;</code> and <code>&lt;code&gt;</code>.</li>
</ul>

<h4>Convenience Transforms</h4>
<ul>
  <li><code>trim</code> — removes one leading and trailing blank line from content.</li>
  <li><code>normalize-indent</code> — removes smallest common leading indent across non-empty lines.</li>
</ul>

<h3>Behaviors &amp; Interaction</h3>
<ul>
  <li><strong>Render paths:</strong>
    <ul>
      <li><em>Default (non-Prism):</em> gathers slotted nodes and writes literal text into internal <code>&lt;pre&gt;</code>.</li>
      <li><em>Prism mode:</em> ensures <code>&lt;pre&gt;&lt;code&gt;</code> structure, applies <code>trim</code>/<code>normalize-indent</code>, language classes, and triggers <code>Prism.highlightElement()</code>.</li>
    </ul>
  </li>
  <li><strong>Width stepping:</strong> click body to widen (+40px); click title to narrow (−40px); minimum width 240px.</li>
  <li><strong>Box harmonization:</strong> normalizes padding, margins, and layout for visible code element and inner <code>&lt;code&gt;</code>.</li>
  <li><strong>Overflow behavior:</strong> non-Prism uses <code>overflow-y: auto</code>; Prism applies <code>overflow-x</code> to visible element.</li>
</ul>

<h3>Parts (for theming)</h3>
<ul>
  <li><code>part="component"</code> — main framed box.</li>
  <li><code>part="title"</code> — title row.</li>
</ul>

<h3>Custom Properties (CSS Variables)</h3>
<ul>
  <li><code>--wrapper-bg</code> — wrapper background.</li>
  <li><code>--component-bg</code> — set via <code>bg-color</code>.</li>
  <li><code>--title-bg</code> — set via <code>title-bg-color</code>.</li>
  <li><code>--code-bg</code> — set via <code>background-color</code>.</li>
  <li><code>--code-fg</code> — set via <code>color</code>.</li>
  <li><code>--code-width</code>, <code>--code-height</code>, <code>--code-overflow-x</code> — sync with attributes in non-Prism mode.</li>
</ul>

<h3>Events</h3>
<p>No public events. Internal handlers respond to <code>slotchange</code> and click events but no custom events are emitted.</p>

<h3>Usage Examples</h3>

<h4>1) Plain (non-Prism) Viewer</h4>
<pre><code>&lt;code-viewer width="50ch" height="18rem" trim normalize-indent 
  font-family="JetBrains Mono" font-size="0.95rem"&gt;
  HTML Example
  &lt;template slot="code"&gt;
    &lt;div class="note"&gt;This appears as literal text, not rendered HTML.&lt;/div&gt;
  &lt;/template&gt;
&lt;/code-viewer&gt;</code></pre>

<h4>2) Prism Highlighted Viewer</h4>
<pre><code>&lt;link rel="stylesheet" href="prism.css"&gt;
&lt;script src="prism.js" defer&gt;&lt;/script&gt;

&lt;code-viewer highlight="prism" language="javascript" width="52ch" 
  overflow-x="auto" code-padding="0.5rem 0.75rem" trim normalize-indent&gt;
  JS Snippet
  &lt;pre slot="code"&gt;&lt;code&gt;
// Your code here...
function hello(name) {
  console.log(`Hello, ${name}`);
}
  &lt;/code&gt;&lt;/pre&gt;
&lt;/code-viewer&gt;</code></pre>

<h4>3) Interactive Width Stepping</h4>
<ul>
  <li>Click inside code box: width increases by 40px.</li>
  <li>Click title bar: width decreases by 40px.</li>
  <li>Minimum width: 240px.</li>
  <li>Changing modes (e.g., toggling Prism) resets width baseline.</li>
</ul>

<h3>Notes &amp; Limits</h3>
<ul>
  <li>In non-Prism mode, slotted code is serialized as text — ideal for showing markup.</li>
  <li>In Prism mode, ensure valid <code>&lt;pre&gt;&lt;code&gt;</code> structure and that language definitions are loaded.</li>
  <li>No keyboard or ARIA roles by default; add externally if needed for accessibility.</li>
</ul>
    <div style="height:15em;"></div>
  </content-block>
  <div id="bottomMenu">
    <div id="keys" class="hidden"></div>
    <div id="sections" class="hidden">
      <div class="darkItem listheader" onclick="toggleSections()">Sections</div>
      <div class="menuBody">
        <a href="#top">top</a>
        <a href="#bottom">bottom</a>
      </div>
    </div>
    <div id="pages" class="hidden"></div>
    <div id="url" class="hidden">url</div>
    <div id="goto" class="hidden">url</div>
  </div>
  <a id="bottom"></a>
  <script src="js/WebDevCompPages.js"></script>
  <script>buildPages()</script>
  <script>createSiteNavMenu('goto')</script>
  <script src="../js/link-nav.js" defer></script>
  <script>
    setCookie('#pages', 3, 10);
  </script>
</body>
</html>