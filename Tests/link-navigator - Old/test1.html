<!DOCTYPE html>
<html id="top" lang="en">
  <head>
    <title>Test1</title>
    <script src="../../js/ContentMenus.js"></script>
    <link rel="stylesheet" href="css/link-nav.css">
    <style>
      body {
        font-size: 22px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1rem;
        padding:1rem;
        overflow-y: auto;
      }
      t-b {
        display: block;
        margin: 1rem 0rem;
        max-width: 50rem;
      }
      .hidden {
        display:none;
      }
      #sections {
        /* display: flex;
        flex-direction: column; */
        position:fixed;
        top:1rem;
        right:1rem;
        z-index: 1000;
        width:max-content;
        padding: 0rem 0.25rem 1rem 0.25rem;
        background-color: #fefefa;
        border:2px solid black;
        cursor:pointer;
        line-height: 0.5rem;
      }
      #sections a {
        /* margin:0.5rem 0rem; */
        /* flex: 1; */
        display:block;
        margin:0.5rem;
        padding:0.5rem 0.25rem;
        min-width: 4rem;
      }
      #sections a.active {
        background-color: #bbb;
        color: #333;
        font-weight: bold;
      }

      #sections a:hover {
        cursor: pointer;
        background-color: #ccc;
      }

      #pages {
        /* display: flex;
        flex-direction: column; */
        position:fixed;
        top:1rem;
        right:1rem;
        z-index: 1000;
        width:max-content;
        padding: 0rem 0.25rem 1rem 0.25rem;
        background-color: #fefefa;
        border:2px solid black;
        cursor:pointer;
        line-height: 0.5rem;
      }
      #pages a {
        /* margin:0.5rem 0rem; */
        /* flex: 1; */
        display:block;
        margin:0.5rem;
        padding:0.5rem 0.25rem;
        min-width: 4rem;
      }
      #pages a.active {
        background-color: #bbb;
        color: #333;
        font-weight: bold;
      }

      #pages a:hover {
        cursor: pointer;
        background-color: #ccc;
      }
    </style>
    <script src="js/link-nav.js" defer></script>
    <script defer>
      window.onmessage = function (event) {
        console.log("Message received in iframe:" + event.data);
        // console.log("Message received in iframe:");
        // alert('in onmessage handler');
        switch(event.data) {
          case 'up':
            window.sectionNavigator.up();
            break;
          case 'down':
            window.sectionNavigator.down();
            break;
          case 'next':
          // window.pageNavigator.down();
            document.getElementById('next').click();
            break;
          case 'prev':
            // window.pageNavigator.up();
            document.getElementById('prev').click();
            break;
          case 'sections':
            let sections = document.getElementById('sections');
            if(sections.classList.contains('hidden')) {
              sections.classList.remove('hidden');
              setCookie('sections', true, 10);
              let pages = document.getElementById('pages');
              pages.classList.add('hidden');
              setCookie('pages', false, 10);
            } else {
              sections.classList.add('hidden');
              setCookie('sections', false, 10);
            }
            break;
          case 'pages':
          let pages = document.getElementById('pages');
            if(pages.classList.contains('hidden')) {
              pages.classList.remove('hidden');
              setCookie('pages', true, 10);
              let sections = document.getElementById('sections');
              sections.classList.add('hidden');
              setCookie('sections', false, 10);
            } else {
              pages.classList.add('hidden');
              setCookie('pages', false, 10);
            }
            break;
          default:
            console.log('no match for message data');
        }
      };
    </script>
    <script defer>
      function persistPages() {
        const pages = getCookie('pages');
        if(pages === 'true') {
          let pgs = document.getElementById('pages');
          pgs.classList.remove('hidden');
        }
      }
      function persistSections() {
        const sections = getCookie('sections');
        if(sections === 'true') {
          let sects = document.getElementById('sections');
            sects.classList.remove('hidden');
        }
      }
      function load() {
        console.log('in load()');
        persistPages();
        persistSections();
      }
    </script>
  </head>
  <body onload="load()">
    <a id="next" href="test2.html" class="hidden">Next</a>
    <a id="prev" href="test1.html" class="hidden">prev</a>

    <div id="sections" class="hidden">
      <a target="_self" href="#top">top</a>
      <a target="_self" href="#first">first</a>
      <a target="_self" href="#second">second</a>
      <a target="_self" href="#third">third</a>
      <a target="_self" href="#bottom">bottom</a>
    </div>
    <div id="pages" class="hidden">
      <a target="rpanel" href="Test1.html">Test1</a>
      <a target="_self" href="Test2.html">Test2</a>
      <a target="_self" href="Test3.html">Test3</a>
      <a target="_self" href="Test4.html">Test4</a>
    </div>
    <!-- <script src="js/link-nav.js" defer></script> -->

    <h2>Test1</h2>
    <p>
      This is a test file for the LinkNavigator.
    </p>
    <p id="first">
      <h3>First Section</h3>
      yada yada yada yada yada yada yada yada yada yada yada yada 
      yada yada yada yada yada yada yada yada yada yada yada yada 
    </p>
    <p id="second">
      <h3>Second Section</h3>
      yada yada yada yada yada yada yada yada yada yada yada yada 
      yada yada yada yada yada yada yada yada yada yada yada yada 
    </p>
    <p id="third">
      <h3>Third Section</h3>
      yada yada yada yada yada yada yada yada yada yada yada yada 
      yada yada yada yada yada yada yada yada yada yada yada yada 
    </p>
    <div style="height:45rem;"></div>
    <a id="bottom"></a>
    <!-- <script defer>
      window.onmessage = function (event) {
        console.log("Message received in iframe:" + event.data);
        // console.log("Message received in iframe:");
        // alert('in onmessage handler');
        switch(event.data) {
          case 'up':
            window.sectionNavigator.up();
            break;
          case 'down':
            window.sectionNavigator.down();
            break;
          case 'next':
            document.getElementById('next').click();
            break;
          case 'prev':
            document.getElementById('prev').click();
            break;
          case 'sections':
            let sections = document.getElementById('sections');
            sections.classList.toggle('hidden');
            break;
          case 'pages':
            let pages = document.getElementById('pages');
            pages.classList.toggle('hidden');
            break;
          default:
            console.log('no match for message data');
        }
      };
    </script> -->
    <!-- <script src="js/link-nav.js" defer></script> -->
    <!-- <script>
      window.onmessage = function (event) {
        console.log("Message received in iframe:", event.data);
          switch(event.data) {
            case 'up':
              window.sectionNavigator.up();
              break;
            case 'down':
              window.sectionNavigator.down();
              break;
            default:
              console.log('no match for message data');
          }
      };
    </script> -->
    <!-- <script defer>
      sectionNavigator = new linkNavigator("#sections");
    </script> -->
  </body>
</html>