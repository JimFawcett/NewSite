<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>QueryString</title>
    <script>
      function getParameterByName(name, url = window.location.href) {
        // escape any [ or ] in the name
        name = name.replace(/[[\]]/g, '\\$&');
        // capture everything after `=` up to—but not including—an `&`
        const regex = new RegExp(`[?&]${name}=([^&]*)`);
        const results = regex.exec(url);
        return results
          ? decodeURIComponent(results[1])
          : null;

        // name = name.replace(/[\[\]]/g, '\\$&');
        // var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
        // results = regex.exec(url);
        // if (!results) return null;
        // if (!results[2]) return '';
        // return decodeURIComponent(results[2].replace(/\+/g, ' '));
      }

        // On page load
      // window.onload = function() {
      //     // Change this value to test different URL types
      //     const testUrl = "../Rust/RustBites_intro.html";
      //     // const testUrl = "file:///C:/Users/JimFawcett/Docs/index.html";
      //     // const testUrl = "https://example.com/page?query=test";

      //     // Save the URL to cookie
      //     saveUrlToCookie(testUrl);

      //     // Retrieve it and show
      //     const retrievedUrl = getUrlFromCookie();
      //     document.getElementById("original").textContent = testUrl;
      //     document.getElementById("retrieved").textContent = retrievedUrl;
      // };
    </script>
    <style>
      inset {
        display:block;
        margin-left:1rem;
      }
    </style>
</head>
<body>
    <h2>Test processQueryString</h2>
    <script>
      const url = 'https://somePage.html?src=anotherPage.html?src=thirdPage.html#intro';
      const retrn = getParameterByName('src',url);
      const retrnagain = getParameterByName('src', retrn);
    </script>
    <p><strong>Original URL:</strong></p>
    <inset>
      <div id="original"></div>
    </inset>
    <p><strong>Retrieved from url:</strong></p>
    <inset>
      <div id="processed"></div>
    </inset>
    <p><strong>Processed again:</strong></p>
    <inset>
      <div id="processedagain"></div>
    </inset>
    <script>
      document.getElementById('original').textContent = url;
      document.getElementById('processed').textContent = retrn;
      document.getElementById('processedagain').textContent = retrnagain;
    </script>
</body>
</html>
